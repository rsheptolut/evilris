ca65 V2.13.9 - (C) Copyright 1998-2011 Ullrich von Bassewitz
Main file   : src/main.s
Current file: src/main.s

000000r 1               ;
000000r 1               ; File generated by cc65 v 2.13.9
000000r 1               ;
000000r 1               	.fopt		compiler,"cc65 v 2.13.9"
000000r 1               	.setcpu		"6502"
000000r 1               	.smart		on
000000r 1               	.autoimport	on
000000r 1               	.case		on
000000r 1               	.debuginfo	off
000000r 1               	.importzp	sp, sreg, regsave, regbank
000000r 1               	.importzp	tmp1, tmp2, tmp3, tmp4, ptr1, ptr2, ptr3, ptr4
000000r 1               	.macpack	longbranch
000000r 1               	.forceimport	__STARTUP__
000000r 1               	.importzp	__nmi_count
000000r 1               	.import		_wait_vblank
000000r 1               	.import		_read_joy
000000r 1               	.export		_srand
000000r 1               	.export		_rand
000000r 1               	.export		_SetDefaultGamePalette
000000r 1               	.export		_DrawScreen
000000r 1               	.export		_RandomizeNextTetraminos
000000r 1               	.export		_RenderTetraminoMask
000000r 1               	.export		_GetNextTetramino
000000r 1               	.export		_CreateNewTetramino
000000r 1               	.export		_UpdateFrame
000000r 1               	.export		_UpdateTetraSprite
000000r 1               	.export		_UpdateGhostSprite
000000r 1               	.export		_UpdateNextSprite
000000r 1               	.export		_UpdateHoldSprite
000000r 1               	.export		_ClearTetraSprite
000000r 1               	.export		_CheckCollision
000000r 1               	.export		_PlaceTetramino
000000r 1               	.import		_place_tetramino
000000r 1               	.export		_ClearPlayfield
000000r 1               	.import		_draw_tetramino_at_playfield
000000r 1               	.export		_DrawTetraminoAtPlayfield
000000r 1               	.export		_rand_t
000000r 1               	.import		_clear_playfield
000000r 1               	.import		_clear_nt0
000000r 1               	.import		_ppu_write
000000r 1               	.export		_Rotate
000000r 1               	.export		_WaitForInput
000000r 1               	.export		_FixPosition
000000r 1               	.export		_FindLinesToClear
000000r 1               	.export		_ClearMarkedLinesInPlayfield
000000r 1               	.export		_AnimateLinesToClear
000000r 1               	.import		_animate_lines_to_clear
000000r 1               	.import		_blit_playfield
000000r 1               	.import		_clear_marked_lines_in_playfield
000000r 1               	.import		_display_rle_nt
000000r 1               	.import		_delay
000000r 1               	.export		_UpdateScore
000000r 1               	.export		_UpdateLevel
000000r 1               	.export		_DrawScore
000000r 1               	.export		_DrawLevel
000000r 1               	.export		_GetScoreAddition
000000r 1               	.export		_UpdateLevelParams
000000r 1               	.export		_PlayFixSound
000000r 1               	.export		_WaitUnpause
000000r 1               	.import		_nt_game_screen_rlec
000000r 1               	.import		_nt_title_screen_rlec
000000r 1               	.export		_main
000000r 1               	.export		_IntToStr
000000r 1               
000000r 1               .segment	"DATA"
000000r 1               
000000r 1               _tetramino_colors:
000000r 1  1C           	.byte	$1C
000001r 1  21           	.byte	$21
000002r 1  31           	.byte	$31
000003r 1  02           	.byte	$02
000004r 1  11           	.byte	$11
000005r 1  21           	.byte	$21
000006r 1  07           	.byte	$07
000007r 1  17           	.byte	$17
000008r 1  27           	.byte	$27
000009r 1  17           	.byte	$17
00000Ar 1  27           	.byte	$27
00000Br 1  37           	.byte	$37
00000Cr 1  0B           	.byte	$0B
00000Dr 1  1A           	.byte	$1A
00000Er 1  2A           	.byte	$2A
00000Fr 1  04           	.byte	$04
000010r 1  14           	.byte	$14
000011r 1  24           	.byte	$24
000012r 1  06           	.byte	$06
000013r 1  15           	.byte	$15
000014r 1  35           	.byte	$35
000015r 1  31           	.byte	$31
000016r 1  2A           	.byte	$2A
000017r 1  24           	.byte	$24
000018r 1               _line_clear_graphic:
000018r 1  02           	.byte	$02
000019r 1  02           	.byte	$02
00001Ar 1  02           	.byte	$02
00001Br 1  02           	.byte	$02
00001Cr 1  02           	.byte	$02
00001Dr 1  02           	.byte	$02
00001Er 1  02           	.byte	$02
00001Fr 1  02           	.byte	$02
000020r 1  02           	.byte	$02
000021r 1  02           	.byte	$02
000022r 1  0D           	.byte	$0D
000023r 1  03           	.byte	$03
000024r 1  03           	.byte	$03
000025r 1  03           	.byte	$03
000026r 1  03           	.byte	$03
000027r 1  03           	.byte	$03
000028r 1  03           	.byte	$03
000029r 1  03           	.byte	$03
00002Ar 1  03           	.byte	$03
00002Br 1  0E           	.byte	$0E
00002Cr 1  00           	.byte	$00
00002Dr 1  00           	.byte	$00
00002Er 1  0D           	.byte	$0D
00002Fr 1  03           	.byte	$03
000030r 1  03           	.byte	$03
000031r 1  03           	.byte	$03
000032r 1  03           	.byte	$03
000033r 1  0E           	.byte	$0E
000034r 1  00           	.byte	$00
000035r 1  00           	.byte	$00
000036r 1  00           	.byte	$00
000037r 1  00           	.byte	$00
000038r 1  00           	.byte	$00
000039r 1  00           	.byte	$00
00003Ar 1  0D           	.byte	$0D
00003Br 1  0E           	.byte	$0E
00003Cr 1  00           	.byte	$00
00003Dr 1  00           	.byte	$00
00003Er 1  00           	.byte	$00
00003Fr 1  00           	.byte	$00
000040r 1  00           	.byte	$00
000041r 1  00           	.byte	$00
000042r 1  00           	.byte	$00
000043r 1  00           	.byte	$00
000044r 1  00           	.byte	$00
000045r 1  00           	.byte	$00
000046r 1  00           	.byte	$00
000047r 1  00           	.byte	$00
000048r 1  00           	.byte	$00
000049r 1  00           	.byte	$00
00004Ar 1               
00004Ar 1               .segment	"RODATA"
000000r 1               
000000r 1               _tetraminos:
000000r 1  23           	.byte	$23
000001r 1  26           	.byte	$26
000002r 1  24           	.byte	$24
000003r 1  45           	.byte	$45
000004r 1  45           	.byte	$45
000005r 1  25           	.byte	$25
000006r 1  56           	.byte	$56
000007r 1               _tetramino_sizes:
000007r 1  04           	.byte	$04
000008r 1  03           	.byte	$03
000009r 1  03           	.byte	$03
00000Ar 1  02           	.byte	$02
00000Br 1  03           	.byte	$03
00000Cr 1  03           	.byte	$03
00000Dr 1  03           	.byte	$03
00000Er 1               _level_speeds:
00000Er 1  19           	.byte	$19
00000Fr 1  15           	.byte	$15
000010r 1  12           	.byte	$12
000011r 1  10           	.byte	$10
000012r 1  0E           	.byte	$0E
000013r 1  0D           	.byte	$0D
000014r 1  0C           	.byte	$0C
000015r 1  0B           	.byte	$0B
000016r 1  0A           	.byte	$0A
000017r 1  09           	.byte	$09
000018r 1  08           	.byte	$08
000019r 1  08           	.byte	$08
00001Ar 1  07           	.byte	$07
00001Br 1  07           	.byte	$07
00001Cr 1  06           	.byte	$06
00001Dr 1  06           	.byte	$06
00001Er 1  05           	.byte	$05
00001Fr 1  05           	.byte	$05
000020r 1  05           	.byte	$05
000021r 1  04           	.byte	$04
000022r 1               _paused_text:
000022r 1  50           	.byte	$50
000023r 1  41           	.byte	$41
000024r 1  55           	.byte	$55
000025r 1  53           	.byte	$53
000026r 1  45           	.byte	$45
000027r 1  44           	.byte	$44
000028r 1               
000028r 1               .segment	"BSS"
000000r 1               
000000r 1               _i:
000000r 1  00           	.res	1,$00
000001r 1               _j:
000001r 1  00           	.res	1,$00
000002r 1               _ptr1:
000002r 1  00 00        	.res	2,$00
000004r 1               _ptr2:
000004r 1  00 00        	.res	2,$00
000006r 1               _tmp1:
000006r 1  00           	.res	1,$00
000007r 1               _randvalue:
000007r 1  00           	.res	1,$00
000008r 1               _prev_joy:
000008r 1  00           	.res	1,$00
000009r 1               _joy:
000009r 1  00           	.res	1,$00
00000Ar 1               _f_t_move:
00000Ar 1  00           	.res	1,$00
00000Br 1               _f_t_tetramino:
00000Br 1  00           	.res	1,$00
00000Cr 1               _f_t_fix:
00000Cr 1  00           	.res	1,$00
00000Dr 1               _f_t_fix_mode:
00000Dr 1  00           	.res	1,$00
00000Er 1               _joy_frames:
00000Er 1  00           	.res	1,$00
00000Fr 1               _joy_thresh:
00000Fr 1  00           	.res	1,$00
000010r 1               _joy_repeat:
000010r 1  00           	.res	1,$00
000011r 1               _joy_thresh_slow:
000011r 1  00           	.res	1,$00
000012r 1               _joy_thresh_fast:
000012r 1  00           	.res	1,$00
000013r 1               _joy_block:
000013r 1  00           	.res	1,$00
000014r 1               _joy_dx:
000014r 1  00           	.res	1,$00
000015r 1               _joy_drop_performed:
000015r 1  00           	.res	1,$00
000016r 1               _gameover:
000016r 1  00           	.res	1,$00
000017r 1               _btn_frames:
000017r 1  00           	.res	1,$00
000018r 1               _lines_cleared:
000018r 1  00           	.res	1,$00
000019r 1               _total_lines_cleared:
000019r 1  00           	.res	1,$00
00001Ar 1               _level_lines_cleared:
00001Ar 1  00           	.res	1,$00
00001Br 1               _prev_lines_cleared:
00001Br 1  00           	.res	1,$00
00001Cr 1               _hold_performed:
00001Cr 1  00           	.res	1,$00
00001Dr 1               _score:
00001Dr 1  00 00        	.res	2,$00
00001Fr 1               _level:
00001Fr 1  00           	.res	1,$00
000020r 1               _movedelay:
000020r 1  00           	.res	1,$00
000021r 1               _paused:
000021r 1  00           	.res	1,$00
000022r 1               _next_tetraminos:
000022r 1  00 00        	.res	2,$00
000024r 1               _digit_chars_score:
000024r 1  00 00 00 00  	.res	6,$00
000028r 1  00 00        
00002Ar 1               _digit_chars_level:
00002Ar 1  00 00        	.res	2,$00
00002Cr 1               _playfield:
00002Cr 1  00 00 00 00  	.res	240,$00
000030r 1  00 00 00 00  
000034r 1  00 00 00 00  
00011Cr 1               _lines_to_clear:
00011Cr 1  00 00 00 00  	.res	24,$00
000120r 1  00 00 00 00  
000124r 1  00 00 00 00  
000134r 1               _tetramino:
000134r 1  00 00 00 00  	.res	8,$00
000138r 1  00 00 00 00  
00013Cr 1               _seed_1:
00013Cr 1  00           	.res	1,$00
00013Dr 1               _tetra_x:
00013Dr 1  00           	.res	1,$00
00013Er 1               _tetra_hold:
00013Er 1  00           	.res	1,$00
00013Fr 1               _ghost_y:
00013Fr 1  00           	.res	1,$00
000140r 1               _tetra_y:
000140r 1  00           	.res	1,$00
000141r 1               _tetra_i:
000141r 1  00           	.res	1,$00
000142r 1               _tetra_rnd:
000142r 1  00           	.res	1,$00
000143r 1               _block_x:
000143r 1  00           	.res	1,$00
000144r 1               _block_y:
000144r 1  00           	.res	1,$00
000145r 1               _block_i:
000145r 1  00           	.res	1,$00
000146r 1               _playfield_changed:
000146r 1  00           	.res	1,$00
000147r 1               _palette_changed:
000147r 1  00           	.res	1,$00
000148r 1               
000148r 1               ; ---------------------------------------------------------------
000148r 1               ; void __near__ srand (void)
000148r 1               ; ---------------------------------------------------------------
000148r 1               
000148r 1               .segment	"CODE"
000000r 1               
000000r 1               .proc	_srand: near
000000r 1               
000000r 1               .segment	"CODE"
000000r 1               
000000r 1  A5 rr        	lda     __nmi_count
000002r 1  18           	clc
000003r 1  6D rr rr     	adc     _randvalue
000006r 1  4D rr rr     	eor     _btn_frames
000009r 1  8D rr rr     	sta     _seed_1
00000Cr 1  AD rr rr     	lda     _seed_1
00000Fr 1  D0 05        	bne     L0736
000011r 1  A9 01        	lda     #$01
000013r 1  8D rr rr     	sta     _seed_1
000016r 1  60           L0736:	rts
000017r 1               
000017r 1               .endproc
000017r 1               
000017r 1               ; ---------------------------------------------------------------
000017r 1               ; unsigned char __near__ rand (void)
000017r 1               ; ---------------------------------------------------------------
000017r 1               
000017r 1               .segment	"CODE"
000017r 1               
000017r 1               .proc	_rand: near
000017r 1               
000017r 1               .segment	"CODE"
000017r 1               
000017r 1  A2 00        	ldx     #$00
000019r 1  AD rr rr     	lda     _seed_1
00001Cr 1  20 rr rr     	jsr     asrax1
00001Fr 1  85 rr        	sta     ptr1
000021r 1  86 rr        	stx     ptr1+1
000023r 1  AD rr rr     	lda     _seed_1
000026r 1  A2 00        	ldx     #$00
000028r 1  29 01        	and     #$01
00002Ar 1  F0 02        	beq     L0742
00002Cr 1  A9 F0        	lda     #$F0
00002Er 1  45 rr        L0742:	eor     ptr1
000030r 1  48           	pha
000031r 1  8A           	txa
000032r 1  45 rr        	eor     ptr1+1
000034r 1  68           	pla
000035r 1  8D rr rr     	sta     _seed_1
000038r 1  29 01        	and     #$01
00003Ar 1  0A           	asl     a
00003Br 1  0A           	asl     a
00003Cr 1  8D rr rr     	sta     _randvalue
00003Fr 1  AD rr rr     	lda     _seed_1
000042r 1  20 rr rr     	jsr     asrax1
000045r 1  85 rr        	sta     ptr1
000047r 1  86 rr        	stx     ptr1+1
000049r 1  AD rr rr     	lda     _seed_1
00004Cr 1  A2 00        	ldx     #$00
00004Er 1  29 01        	and     #$01
000050r 1  F0 02        	beq     L074E
000052r 1  A9 F0        	lda     #$F0
000054r 1  45 rr        L074E:	eor     ptr1
000056r 1  48           	pha
000057r 1  8A           	txa
000058r 1  45 rr        	eor     ptr1+1
00005Ar 1  68           	pla
00005Br 1  8D rr rr     	sta     _seed_1
00005Er 1  29 01        	and     #$01
000060r 1  0A           	asl     a
000061r 1  0D rr rr     	ora     _randvalue
000064r 1  8D rr rr     	sta     _randvalue
000067r 1  AD rr rr     	lda     _seed_1
00006Ar 1  20 rr rr     	jsr     asrax1
00006Dr 1  85 rr        	sta     ptr1
00006Fr 1  86 rr        	stx     ptr1+1
000071r 1  AD rr rr     	lda     _seed_1
000074r 1  A2 00        	ldx     #$00
000076r 1  29 01        	and     #$01
000078r 1  F0 02        	beq     L075A
00007Ar 1  A9 F0        	lda     #$F0
00007Cr 1  45 rr        L075A:	eor     ptr1
00007Er 1  8D rr rr     	sta     _seed_1
000081r 1  8A           	txa
000082r 1  45 rr        	eor     ptr1+1
000084r 1  AD rr rr     	lda     _seed_1
000087r 1  29 01        	and     #$01
000089r 1  0D rr rr     	ora     _randvalue
00008Cr 1  8D rr rr     	sta     _randvalue
00008Fr 1  AD rr rr     	lda     _btn_frames
000092r 1  29 07        	and     #$07
000094r 1  4D rr rr     	eor     _randvalue
000097r 1  49 07        	eor     #$07
000099r 1  60           	rts
00009Ar 1               
00009Ar 1               .endproc
00009Ar 1               
00009Ar 1               ; ---------------------------------------------------------------
00009Ar 1               ; void __near__ SetDefaultGamePalette (void)
00009Ar 1               ; ---------------------------------------------------------------
00009Ar 1               
00009Ar 1               .segment	"CODE"
00009Ar 1               
00009Ar 1               .proc	_SetDefaultGamePalette: near
00009Ar 1               
00009Ar 1               .segment	"RODATA"
000028r 1               
000028r 1               L0402:
000028r 1  0F           	.byte	$0F
000029r 1  17           	.byte	$17
00002Ar 1  27           	.byte	$27
00002Br 1  30           	.byte	$30
00002Cr 1  0F           	.byte	$0F
00002Dr 1  0A           	.byte	$0A
00002Er 1  1A           	.byte	$1A
00002Fr 1  2A           	.byte	$2A
000030r 1  0F           	.byte	$0F
000031r 1  30           	.byte	$30
000032r 1  1A           	.byte	$1A
000033r 1  0F           	.byte	$0F
000034r 1  0F           	.byte	$0F
000035r 1  17           	.byte	$17
000036r 1  27           	.byte	$27
000037r 1  0F           	.byte	$0F
000038r 1               
000038r 1               .segment	"CODE"
00009Ar 1               
00009Ar 1  20 rr rr     	jsr     _wait_vblank
00009Dr 1  A9 3F        	lda     #$3F
00009Fr 1  8D 06 20     	sta     $2006
0000A2r 1  A9 00        	lda     #$00
0000A4r 1  8D 06 20     	sta     $2006
0000A7r 1  8D rr rr     	sta     _i
0000AAr 1  AD rr rr     L0961:	lda     _i
0000ADr 1  C9 10        	cmp     #$10
0000AFr 1  B0 0F        	bcs     L0426
0000B1r 1  AC rr rr     	ldy     _i
0000B4r 1  B9 rr rr     	lda     L0402,y
0000B7r 1  8D 07 20     	sta     $2007
0000BAr 1  EE rr rr     	inc     _i
0000BDr 1  4C rr rr     	jmp     L0961
0000C0r 1  60           L0426:	rts
0000C1r 1               
0000C1r 1               .endproc
0000C1r 1               
0000C1r 1               ; ---------------------------------------------------------------
0000C1r 1               ; void __near__ DrawScreen (__near__ unsigned char*)
0000C1r 1               ; ---------------------------------------------------------------
0000C1r 1               
0000C1r 1               .segment	"CODE"
0000C1r 1               
0000C1r 1               .proc	_DrawScreen: near
0000C1r 1               
0000C1r 1               .segment	"BSS"
000148r 1               
000148r 1               L0433:
000148r 1  00 00        	.res	2,$00
00014Ar 1               
00014Ar 1               .segment	"CODE"
0000C1r 1               
0000C1r 1  20 rr rr     	jsr     _wait_vblank
0000C4r 1  A9 06        	lda     #$06
0000C6r 1  8D 01 20     	sta     $2001
0000C9r 1  A0 01        	ldy     #$01
0000CBr 1  B1 rr        	lda     (sp),y
0000CDr 1  AA           	tax
0000CEr 1  88           	dey
0000CFr 1  B1 rr        	lda     (sp),y
0000D1r 1  85 rr        	sta     ptr1
0000D3r 1  86 rr        	stx     ptr1+1
0000D5r 1  C8           	iny
0000D6r 1  B1 rr        	lda     (ptr1),y
0000D8r 1  AA           	tax
0000D9r 1  88           	dey
0000DAr 1  B1 rr        	lda     (ptr1),y
0000DCr 1  20 rr rr     	jsr     shrax1
0000DFr 1  8D rr rr     	sta     L0433
0000E2r 1  8E rr rr     	stx     L0433+1
0000E5r 1  A2 00        	ldx     #$00
0000E7r 1  A9 02        	lda     #$02
0000E9r 1  20 rr rr     	jsr     addeq0sp
0000ECr 1  20 rr rr     	jsr     decsp4
0000EFr 1  A0 05        	ldy     #$05
0000F1r 1  B1 rr        	lda     (sp),y
0000F3r 1  AA           	tax
0000F4r 1  88           	dey
0000F5r 1  B1 rr        	lda     (sp),y
0000F7r 1  A0 02        	ldy     #$02
0000F9r 1  91 rr        	sta     (sp),y
0000FBr 1  C8           	iny
0000FCr 1  8A           	txa
0000FDr 1  91 rr        	sta     (sp),y
0000FFr 1  AD rr rr     	lda     L0433
000102r 1  A0 00        	ldy     #$00
000104r 1  91 rr        	sta     (sp),y
000106r 1  C8           	iny
000107r 1  AD rr rr     	lda     L0433+1
00010Ar 1  91 rr        	sta     (sp),y
00010Cr 1  20 rr rr     	jsr     _display_rle_nt
00010Fr 1  A9 00        	lda     #$00
000111r 1  8D 06 20     	sta     $2006
000114r 1  8D 06 20     	sta     $2006
000117r 1  20 rr rr     	jsr     _wait_vblank
00011Ar 1  A9 1E        	lda     #$1E
00011Cr 1  8D 01 20     	sta     $2001
00011Fr 1  4C rr rr     	jmp     incsp2
000122r 1               
000122r 1               .endproc
000122r 1               
000122r 1               ; ---------------------------------------------------------------
000122r 1               ; void __near__ RandomizeNextTetraminos (void)
000122r 1               ; ---------------------------------------------------------------
000122r 1               
000122r 1               .segment	"CODE"
000122r 1               
000122r 1               .proc	_RandomizeNextTetraminos: near
000122r 1               
000122r 1               .segment	"CODE"
000122r 1               
000122r 1  20 rr rr     	jsr     _srand
000125r 1  A9 00        	lda     #$00
000127r 1  8D rr rr     L0963:	sta     _i
00012Ar 1  C9 02        	cmp     #$02
00012Cr 1  B0 1F        	bcs     L0451
00012Er 1  A9 rr        	lda     #<(_next_tetraminos)
000130r 1  A2 rr        	ldx     #>(_next_tetraminos)
000132r 1  18           	clc
000133r 1  6D rr rr     	adc     _i
000136r 1  90 01        	bcc     L045A
000138r 1  E8           	inx
000139r 1  20 rr rr     L045A:	jsr     pushax
00013Cr 1  20 rr rr     	jsr     _rand_t
00013Fr 1  A0 00        	ldy     #$00
000141r 1  20 rr rr     	jsr     staspidx
000144r 1  AD rr rr     	lda     _i
000147r 1  18           	clc
000148r 1  69 01        	adc     #$01
00014Ar 1  4C rr rr     	jmp     L0963
00014Dr 1  60           L0451:	rts
00014Er 1               
00014Er 1               .endproc
00014Er 1               
00014Er 1               ; ---------------------------------------------------------------
00014Er 1               ; void __near__ RenderTetraminoMask (unsigned char)
00014Er 1               ; ---------------------------------------------------------------
00014Er 1               
00014Er 1               .segment	"CODE"
00014Er 1               
00014Er 1               .proc	_RenderTetraminoMask: near
00014Er 1               
00014Er 1               .segment	"CODE"
00014Er 1               
00014Er 1  A9 00        	lda     #$00
000150r 1  8D rr rr     	sta     _tetramino
000153r 1  8D rr rr     	sta     _tetramino+2
000156r 1  A8           	tay
000157r 1  B1 rr        	lda     (sp),y
000159r 1  C9 04        	cmp     #$04
00015Br 1  D0 0A        	bne     L0965
00015Dr 1  A9 01        	lda     #$01
00015Fr 1  8D rr rr     	sta     _tetramino+1
000162r 1  A9 02        	lda     #$02
000164r 1  4C rr rr     	jmp     L0964
000167r 1  8C rr rr     L0965:	sty     _tetramino+1
00016Ar 1  A9 01        	lda     #$01
00016Cr 1  8D rr rr     L0964:	sta     _tetramino+3
00016Fr 1  B1 rr        	lda     (sp),y
000171r 1  A8           	tay
000172r 1  B9 rr rr     	lda     _tetraminos,y
000175r 1  8D rr rr     	sta     _j
000178r 1  A2 00        	ldx     #$00
00017Ar 1  AD rr rr     	lda     _j
00017Dr 1  20 rr rr     	jsr     asrax4
000180r 1  20 rr rr     	jsr     asrax2
000183r 1  29 03        	and     #$03
000185r 1  8D rr rr     	sta     _tetramino+4
000188r 1  A2 00        	ldx     #$00
00018Ar 1  AD rr rr     	lda     _j
00018Dr 1  20 rr rr     	jsr     asrax4
000190r 1  29 03        	and     #$03
000192r 1  8D rr rr     	sta     _tetramino+5
000195r 1  A2 00        	ldx     #$00
000197r 1  AD rr rr     	lda     _j
00019Ar 1  20 rr rr     	jsr     asrax2
00019Dr 1  29 03        	and     #$03
00019Fr 1  8D rr rr     	sta     _tetramino+6
0001A2r 1  AD rr rr     	lda     _j
0001A5r 1  29 03        	and     #$03
0001A7r 1  8D rr rr     	sta     _tetramino+7
0001AAr 1  4C rr rr     	jmp     incsp1
0001ADr 1               
0001ADr 1               .endproc
0001ADr 1               
0001ADr 1               ; ---------------------------------------------------------------
0001ADr 1               ; unsigned char __near__ GetNextTetramino (void)
0001ADr 1               ; ---------------------------------------------------------------
0001ADr 1               
0001ADr 1               .segment	"CODE"
0001ADr 1               
0001ADr 1               .proc	_GetNextTetramino: near
0001ADr 1               
0001ADr 1               .segment	"BSS"
00014Ar 1               
00014Ar 1               L045D:
00014Ar 1  00           	.res	1,$00
00014Br 1               
00014Br 1               .segment	"CODE"
0001ADr 1               
0001ADr 1  AD rr rr     	lda     _next_tetraminos
0001B0r 1  8D rr rr     	sta     L045D
0001B3r 1  AD rr rr     	lda     _next_tetraminos+1
0001B6r 1  8D rr rr     	sta     _next_tetraminos
0001B9r 1  20 rr rr     	jsr     _rand_t
0001BCr 1  8D rr rr     	sta     _next_tetraminos+1
0001BFr 1  AD rr rr     	lda     _next_tetraminos
0001C2r 1  20 rr rr     	jsr     pusha
0001C5r 1  20 rr rr     	jsr     _RenderTetraminoMask
0001C8r 1  A9 00        	lda     #$00
0001CAr 1  20 rr rr     	jsr     pusha
0001CDr 1  20 rr rr     	jsr     _UpdateNextSprite
0001D0r 1  AD rr rr     	lda     _next_tetraminos+1
0001D3r 1  20 rr rr     	jsr     pusha
0001D6r 1  20 rr rr     	jsr     _RenderTetraminoMask
0001D9r 1  A9 01        	lda     #$01
0001DBr 1  20 rr rr     	jsr     pusha
0001DEr 1  20 rr rr     	jsr     _UpdateNextSprite
0001E1r 1  A2 00        	ldx     #$00
0001E3r 1  AD rr rr     	lda     L045D
0001E6r 1  60           	rts
0001E7r 1               
0001E7r 1               .endproc
0001E7r 1               
0001E7r 1               ; ---------------------------------------------------------------
0001E7r 1               ; void __near__ CreateNewTetramino (unsigned char)
0001E7r 1               ; ---------------------------------------------------------------
0001E7r 1               
0001E7r 1               .segment	"CODE"
0001E7r 1               
0001E7r 1               .proc	_CreateNewTetramino: near
0001E7r 1               
0001E7r 1               .segment	"CODE"
0001E7r 1               
0001E7r 1  A9 00        	lda     #$00
0001E9r 1  8D rr rr     	sta     _f_t_move
0001ECr 1  8D rr rr     	sta     _f_t_fix_mode
0001EFr 1  8D rr rr     	sta     _f_t_tetramino
0001F2r 1  20 rr rr     	jsr     _srand
0001F5r 1  A0 00        	ldy     #$00
0001F7r 1  B1 rr        	lda     (sp),y
0001F9r 1  F0 2D        	beq     L0967
0001FBr 1  AD rr rr     	lda     _tetra_hold
0001FEr 1  C9 07        	cmp     #$07
000200r 1  F0 26        	beq     L0967
000202r 1  AD rr rr     	lda     _tetra_hold
000205r 1  8D rr rr     	sta     _tmp1
000208r 1  AD rr rr     	lda     _tetra_i
00020Br 1  8D rr rr     	sta     _tetra_hold
00020Er 1  AD rr rr     	lda     _tmp1
000211r 1  8D rr rr     	sta     _tetra_i
000214r 1  AD rr rr     	lda     _tetra_hold
000217r 1  20 rr rr     	jsr     pusha
00021Ar 1  20 rr rr     	jsr     _RenderTetraminoMask
00021Dr 1  A9 01        	lda     #$01
00021Fr 1  20 rr rr     	jsr     pusha
000222r 1  20 rr rr     	jsr     _UpdateHoldSprite
000225r 1  4C rr rr     	jmp     L0488
000228r 1  B1 rr        L0967:	lda     (sp),y
00022Ar 1  F0 17        	beq     L0969
00022Cr 1  AD rr rr     	lda     _tetra_i
00022Fr 1  8D rr rr     	sta     _tetra_hold
000232r 1  20 rr rr     	jsr     pusha
000235r 1  20 rr rr     	jsr     _RenderTetraminoMask
000238r 1  A9 01        	lda     #$01
00023Ar 1  20 rr rr     	jsr     pusha
00023Dr 1  20 rr rr     	jsr     _UpdateHoldSprite
000240r 1  4C rr rr     	jmp     L0491
000243r 1  8D rr rr     L0969:	sta     _hold_performed
000246r 1  20 rr rr     L0491:	jsr     _GetNextTetramino
000249r 1  8D rr rr     	sta     _tetra_i
00024Cr 1  AD rr rr     L0488:	lda     _tetra_i
00024Fr 1  20 rr rr     	jsr     pusha
000252r 1  20 rr rr     	jsr     _RenderTetraminoMask
000255r 1  A9 03        	lda     #$03
000257r 1  8D rr rr     	sta     _tetra_x
00025Ar 1  A9 02        	lda     #$02
00025Cr 1  8D rr rr     	sta     _tetra_y
00025Fr 1  A9 01        	lda     #$01
000261r 1  20 rr rr     	jsr     pusha0
000264r 1  20 rr rr     	jsr     _Rotate
000267r 1  A9 02        	lda     #$02
000269r 1  20 rr rr     	jsr     pusha0
00026Cr 1  20 rr rr     	jsr     _Rotate
00026Fr 1  20 rr rr     	jsr     _CheckCollision
000272r 1  AA           	tax
000273r 1  F0 05        	beq     L04A0
000275r 1  A9 01        	lda     #$01
000277r 1  8D rr rr     	sta     _gameover
00027Ar 1  20 rr rr     L04A0:	jsr     _UpdateTetraSprite
00027Dr 1  20 rr rr     	jsr     _UpdateGhostSprite
000280r 1  A9 01        	lda     #$01
000282r 1  8D rr rr     	sta     _palette_changed
000285r 1  4C rr rr     	jmp     incsp1
000288r 1               
000288r 1               .endproc
000288r 1               
000288r 1               ; ---------------------------------------------------------------
000288r 1               ; void __near__ UpdateFrame (void)
000288r 1               ; ---------------------------------------------------------------
000288r 1               
000288r 1               .segment	"CODE"
000288r 1               
000288r 1               .proc	_UpdateFrame: near
000288r 1               
000288r 1               .segment	"CODE"
000288r 1               
000288r 1  AD rr rr     	lda     _playfield_changed
00028Br 1  F0 0D        	beq     L04E2
00028Dr 1  A9 00        	lda     #$00
00028Fr 1  20 rr rr     	jsr     pusha
000292r 1  20 rr rr     	jsr     _CreateNewTetramino
000295r 1  A9 00        	lda     #$00
000297r 1  8D rr rr     	sta     _playfield_changed
00029Ar 1  AD rr rr     L04E2:	lda     _tetra_x
00029Dr 1  8D rr rr     	sta     _j
0002A0r 1  AD rr rr     	lda     _joy
0002A3r 1  8D rr rr     	sta     _prev_joy
0002A6r 1  A9 00        	lda     #$00
0002A8r 1  20 rr rr     	jsr     _read_joy
0002ABr 1  8D rr rr     	sta     _joy
0002AEr 1  CD rr rr     	cmp     _prev_joy
0002B1r 1  F0 05        	beq     L0970
0002B3r 1  A9 00        	lda     #$00
0002B5r 1  4C rr rr     	jmp     L099A
0002B8r 1  AD rr rr     L0970:	lda     _btn_frames
0002BBr 1  18           	clc
0002BCr 1  69 01        	adc     #$01
0002BEr 1  8D rr rr     L099A:	sta     _btn_frames
0002C1r 1  AD rr rr     	lda     _joy
0002C4r 1  2D rr rr     	and     _joy_block
0002C7r 1  8D rr rr     	sta     _joy_block
0002CAr 1  AD rr rr     	lda     _joy
0002CDr 1  29 08        	and     #$08
0002CFr 1  F0 13        	beq     L04F7
0002D1r 1  AD rr rr     	lda     _prev_joy
0002D4r 1  29 08        	and     #$08
0002D6r 1  D0 0C        	bne     L04F7
0002D8r 1  AD rr rr     	lda     _joy_block
0002DBr 1  29 08        	and     #$08
0002DDr 1  D0 05        	bne     L04F7
0002DFr 1  A9 01        	lda     #$01
0002E1r 1  8D rr rr     	sta     _paused
0002E4r 1  AD rr rr     L04F7:	lda     _paused
0002E7r 1  F0 01        	beq     L099B
0002E9r 1  60           	rts
0002EAr 1  AD rr rr     L099B:	lda     _joy
0002EDr 1  29 40        	and     #$40
0002EFr 1  F0 19        	beq     L0978
0002F1r 1  AD rr rr     	lda     _f_t_fix_mode
0002F4r 1  D0 14        	bne     L0978
0002F6r 1  AD rr rr     	lda     _joy_block
0002F9r 1  29 40        	and     #$40
0002FBr 1  D0 0D        	bne     L0978
0002FDr 1  A9 FF        	lda     #$FF
0002FFr 1  8D rr rr     	sta     _joy_dx
000302r 1  AD rr rr     	lda     _prev_joy
000305r 1  29 40        	and     #$40
000307r 1  4C rr rr     	jmp     L096E
00030Ar 1  AD rr rr     L0978:	lda     _joy
00030Dr 1  29 80        	and     #$80
00030Fr 1  F0 1E        	beq     L097D
000311r 1  AD rr rr     	lda     _f_t_fix_mode
000314r 1  D0 07        	bne     L0979
000316r 1  AD rr rr     	lda     _joy_block
000319r 1  29 80        	and     #$80
00031Br 1  F0 05        	beq     L097B
00031Dr 1  A9 00        L0979:	lda     #$00
00031Fr 1  4C rr rr     	jmp     L097D
000322r 1  A9 01        L097B:	lda     #$01
000324r 1  8D rr rr     	sta     _joy_dx
000327r 1  AD rr rr     	lda     _prev_joy
00032Ar 1  29 80        	and     #$80
00032Cr 1  4C rr rr     	jmp     L096E
00032Fr 1  8D rr rr     L097D:	sta     _joy_dx
000332r 1  8D rr rr     L096E:	sta     _joy_repeat
000335r 1  AD rr rr     	lda     _joy_dx
000338r 1  F0 3E        	beq     L0980
00033Ar 1  AD rr rr     	lda     _joy_repeat
00033Dr 1  F0 09        	beq     L0524
00033Fr 1  AD rr rr     	lda     _joy_frames
000342r 1  18           	clc
000343r 1  69 01        	adc     #$01
000345r 1  8D rr rr     	sta     _joy_frames
000348r 1  AD rr rr     L0524:	lda     _joy_repeat
00034Br 1  F0 08        	beq     L097E
00034Dr 1  AD rr rr     	lda     _joy_thresh
000350r 1  CD rr rr     	cmp     _joy_frames
000353r 1  D0 23        	bne     L0980
000355r 1  AD rr rr     L097E:	lda     _joy_thresh
000358r 1  CD rr rr     	cmp     _joy_frames
00035Br 1  D0 06        	bne     L097F
00035Dr 1  AD rr rr     	lda     _joy_thresh_fast
000360r 1  4C rr rr     	jmp     L096F
000363r 1  AD rr rr     L097F:	lda     _joy_thresh_slow
000366r 1  8D rr rr     L096F:	sta     _joy_thresh
000369r 1  A9 00        	lda     #$00
00036Br 1  8D rr rr     	sta     _joy_frames
00036Er 1  AD rr rr     	lda     _joy_dx
000371r 1  18           	clc
000372r 1  6D rr rr     	adc     _tetra_x
000375r 1  8D rr rr     	sta     _tetra_x
000378r 1  AD rr rr     L0980:	lda     _joy
00037Br 1  29 02        	and     #$02
00037Dr 1  F0 2E        	beq     L0984
00037Fr 1  AD rr rr     	lda     _prev_joy
000382r 1  29 02        	and     #$02
000384r 1  D0 27        	bne     L0984
000386r 1  AD rr rr     	lda     _joy_block
000389r 1  29 02        	and     #$02
00038Br 1  D0 20        	bne     L0984
00038Dr 1  8D rr rr     	sta     _f_t_fix
000390r 1  A9 01        	lda     #$01
000392r 1  20 rr rr     	jsr     pusha0
000395r 1  20 rr rr     	jsr     _Rotate
000398r 1  20 rr rr     	jsr     _FixPosition
00039Br 1  20 rr rr     	jsr     _CheckCollision
00039Er 1  AA           	tax
00039Fr 1  D0 0C        	bne     L0984
0003A1r 1  AD rr rr     	lda     _movedelay
0003A4r 1  38           	sec
0003A5r 1  E9 07        	sbc     #$07
0003A7r 1  8D rr rr     	sta     _f_t_move
0003AAr 1  8E rr rr     	stx     _f_t_fix_mode
0003ADr 1  AD rr rr     L0984:	lda     _joy
0003B0r 1  29 01        	and     #$01
0003B2r 1  F0 2E        	beq     L0988
0003B4r 1  AD rr rr     	lda     _prev_joy
0003B7r 1  29 01        	and     #$01
0003B9r 1  D0 27        	bne     L0988
0003BBr 1  AD rr rr     	lda     _joy_block
0003BEr 1  29 01        	and     #$01
0003C0r 1  D0 20        	bne     L0988
0003C2r 1  8D rr rr     	sta     _f_t_fix
0003C5r 1  A9 02        	lda     #$02
0003C7r 1  20 rr rr     	jsr     pusha0
0003CAr 1  20 rr rr     	jsr     _Rotate
0003CDr 1  20 rr rr     	jsr     _FixPosition
0003D0r 1  20 rr rr     	jsr     _CheckCollision
0003D3r 1  AA           	tax
0003D4r 1  D0 0C        	bne     L0988
0003D6r 1  AD rr rr     	lda     _movedelay
0003D9r 1  38           	sec
0003DAr 1  E9 07        	sbc     #$07
0003DCr 1  8D rr rr     	sta     _f_t_move
0003DFr 1  8E rr rr     	stx     _f_t_fix_mode
0003E2r 1  AD rr rr     L0988:	lda     _joy
0003E5r 1  29 20        	and     #$20
0003E7r 1  F0 2A        	beq     L098C
0003E9r 1  AD rr rr     	lda     _f_t_fix_mode
0003ECr 1  D0 25        	bne     L098C
0003EEr 1  AD rr rr     	lda     _f_t_move
0003F1r 1  20 rr rr     	jsr     pusha0
0003F4r 1  AD rr rr     	lda     _movedelay
0003F7r 1  38           	sec
0003F8r 1  E9 02        	sbc     #$02
0003FAr 1  B0 02        	bcs     L0564
0003FCr 1  A2 FF        	ldx     #$FF
0003FEr 1  20 rr rr     L0564:	jsr     tosicmp
000401r 1  B0 10        	bcs     L098C
000403r 1  AD rr rr     	lda     _joy_block
000406r 1  29 20        	and     #$20
000408r 1  D0 09        	bne     L098C
00040Ar 1  AD rr rr     	lda     _movedelay
00040Dr 1  38           	sec
00040Er 1  E9 02        	sbc     #$02
000410r 1  8D rr rr     	sta     _f_t_move
000413r 1  AD rr rr     L098C:	lda     _joy
000416r 1  29 04        	and     #$04
000418r 1  F0 17        	beq     L0990
00041Ar 1  AD rr rr     	lda     _joy_block
00041Dr 1  29 04        	and     #$04
00041Fr 1  D0 10        	bne     L0990
000421r 1  AD rr rr     	lda     _hold_performed
000424r 1  D0 0B        	bne     L0990
000426r 1  A9 01        	lda     #$01
000428r 1  8D rr rr     	sta     _hold_performed
00042Br 1  20 rr rr     	jsr     pusha
00042Er 1  20 rr rr     	jsr     _CreateNewTetramino
000431r 1  AD rr rr     L0990:	lda     _joy
000434r 1  29 10        	and     #$10
000436r 1  F0 38        	beq     L0578
000438r 1  AD rr rr     	lda     _f_t_tetramino
00043Br 1  C9 10        	cmp     #$10
00043Dr 1  90 31        	bcc     L0578
00043Fr 1  AD rr rr     	lda     _joy_block
000442r 1  29 10        	and     #$10
000444r 1  D0 2A        	bne     L0578
000446r 1  A9 01        	lda     #$01
000448r 1  8D rr rr     	sta     _joy_drop_performed
00044Br 1  4C rr rr     	jmp     L0584
00044Er 1  AD rr rr     L0994:	lda     _tetra_y
000451r 1  18           	clc
000452r 1  69 01        	adc     #$01
000454r 1  8D rr rr     	sta     _tetra_y
000457r 1  20 rr rr     L0584:	jsr     _CheckCollision
00045Ar 1  AA           	tax
00045Br 1  F0 F1        	beq     L0994
00045Dr 1  AD rr rr     	lda     _tetra_y
000460r 1  38           	sec
000461r 1  E9 01        	sbc     #$01
000463r 1  8D rr rr     	sta     _tetra_y
000466r 1  A9 01        	lda     #$01
000468r 1  8D rr rr     	sta     _f_t_fix_mode
00046Br 1  A9 07        	lda     #$07
00046Dr 1  8D rr rr     	sta     _f_t_fix
000470r 1  20 rr rr     L0578:	jsr     _CheckCollision
000473r 1  AA           	tax
000474r 1  F0 06        	beq     L058C
000476r 1  AD rr rr     	lda     _j
000479r 1  8D rr rr     	sta     _tetra_x
00047Cr 1  AD rr rr     L058C:	lda     _f_t_fix_mode
00047Fr 1  D0 03 4C rr  	jeq     L0996
000483r 1  rr           
000484r 1  AD rr rr     	lda     _f_t_fix
000487r 1  18           	clc
000488r 1  69 01        	adc     #$01
00048Ar 1  8D rr rr     	sta     _f_t_fix
00048Dr 1  C9 07        	cmp     #$07
00048Fr 1  B0 03 4C rr  	jcc     L05D2
000493r 1  rr           
000494r 1  A9 00        	lda     #$00
000496r 1  8D rr rr     	sta     _f_t_fix_mode
000499r 1  AD rr rr     	lda     _tetra_y
00049Cr 1  18           	clc
00049Dr 1  69 01        	adc     #$01
00049Fr 1  8D rr rr     	sta     _tetra_y
0004A2r 1  20 rr rr     	jsr     _CheckCollision
0004A5r 1  AA           	tax
0004A6r 1  D0 03 4C rr  	jeq     L0995
0004AAr 1  rr           
0004ABr 1  AD rr rr     	lda     _tetra_y
0004AEr 1  38           	sec
0004AFr 1  E9 01        	sbc     #$01
0004B1r 1  8D rr rr     	sta     _tetra_y
0004B4r 1  A9 00        	lda     #$00
0004B6r 1  8D rr rr     	sta     _joy_drop_performed
0004B9r 1  8D rr rr     	sta     _joy_block
0004BCr 1  20 rr rr     	jsr     decsp6
0004BFr 1  A9 rr        	lda     #<(_tetramino)
0004C1r 1  A0 04        	ldy     #$04
0004C3r 1  91 rr        	sta     (sp),y
0004C5r 1  C8           	iny
0004C6r 1  A9 rr        	lda     #>(_tetramino)
0004C8r 1  91 rr        	sta     (sp),y
0004CAr 1  A9 rr        	lda     #<(_playfield)
0004CCr 1  A0 02        	ldy     #$02
0004CEr 1  91 rr        	sta     (sp),y
0004D0r 1  C8           	iny
0004D1r 1  A9 rr        	lda     #>(_playfield)
0004D3r 1  91 rr        	sta     (sp),y
0004D5r 1  AD rr rr     	lda     _tetra_x
0004D8r 1  A0 01        	ldy     #$01
0004DAr 1  91 rr        	sta     (sp),y
0004DCr 1  AD rr rr     	lda     _tetra_y
0004DFr 1  88           	dey
0004E0r 1  91 rr        	sta     (sp),y
0004E2r 1  20 rr rr     	jsr     _place_tetramino
0004E5r 1  AD rr rr     	lda     _lines_cleared
0004E8r 1  F0 06        	beq     L05A6
0004EAr 1  AD rr rr     	lda     _lines_cleared
0004EDr 1  8D rr rr     	sta     _prev_lines_cleared
0004F0r 1  20 rr rr     L05A6:	jsr     _FindLinesToClear
0004F3r 1  AD rr rr     	lda     _lines_cleared
0004F6r 1  F0 61        	beq     L05AB
0004F8r 1  AD rr rr     	lda     _lines_cleared
0004FBr 1  18           	clc
0004FCr 1  6D rr rr     	adc     _total_lines_cleared
0004FFr 1  8D rr rr     	sta     _total_lines_cleared
000502r 1  AD rr rr     	lda     _lines_cleared
000505r 1  18           	clc
000506r 1  6D rr rr     	adc     _level_lines_cleared
000509r 1  8D rr rr     	sta     _level_lines_cleared
00050Cr 1  C9 0A        	cmp     #$0A
00050Er 1  90 15        	bcc     L05B1
000510r 1  AD rr rr     	lda     _level
000513r 1  18           	clc
000514r 1  69 01        	adc     #$01
000516r 1  8D rr rr     	sta     _level
000519r 1  20 rr rr     	jsr     _UpdateLevelParams
00051Cr 1  AD rr rr     	lda     _level_lines_cleared
00051Fr 1  38           	sec
000520r 1  E9 0A        	sbc     #$0A
000522r 1  8D rr rr     	sta     _level_lines_cleared
000525r 1  20 rr rr     L05B1:	jsr     _GetScoreAddition
000528r 1  18           	clc
000529r 1  6D rr rr     	adc     _score
00052Cr 1  8D rr rr     	sta     _score
00052Fr 1  A9 00        	lda     #$00
000531r 1  6D rr rr     	adc     _score+1
000534r 1  8D rr rr     	sta     _score+1
000537r 1  20 rr rr     	jsr     _UpdateScore
00053Ar 1  20 rr rr     	jsr     _UpdateLevel
00053Dr 1  20 rr rr     	jsr     decsp4
000540r 1  A9 rr        	lda     #<(_playfield)
000542r 1  A0 02        	ldy     #$02
000544r 1  91 rr        	sta     (sp),y
000546r 1  C8           	iny
000547r 1  A9 rr        	lda     #>(_playfield)
000549r 1  91 rr        	sta     (sp),y
00054Br 1  A9 rr        	lda     #<(_lines_to_clear)
00054Dr 1  A0 00        	ldy     #$00
00054Fr 1  91 rr        	sta     (sp),y
000551r 1  C8           	iny
000552r 1  A9 rr        	lda     #>(_lines_to_clear)
000554r 1  91 rr        	sta     (sp),y
000556r 1  20 rr rr     	jsr     _clear_marked_lines_in_playfield
000559r 1  A9 01        L05AB:	lda     #$01
00055Br 1  8D rr rr     	sta     _playfield_changed
00055Er 1  4C rr rr     	jmp     L05D2
000561r 1  AD rr rr     L0995:	lda     _tetra_y
000564r 1  38           	sec
000565r 1  E9 01        	sbc     #$01
000567r 1  4C rr rr     	jmp     L0999
00056Ar 1  AD rr rr     L0996:	lda     _f_t_move
00056Dr 1  18           	clc
00056Er 1  69 01        	adc     #$01
000570r 1  8D rr rr     	sta     _f_t_move
000573r 1  AD rr rr     	lda     _f_t_tetramino
000576r 1  18           	clc
000577r 1  69 01        	adc     #$01
000579r 1  8D rr rr     	sta     _f_t_tetramino
00057Cr 1  AD rr rr     	lda     _movedelay
00057Fr 1  CD rr rr     	cmp     _f_t_move
000582r 1  D0 27        	bne     L0997
000584r 1  A9 00        	lda     #$00
000586r 1  8D rr rr     	sta     _f_t_move
000589r 1  AD rr rr     	lda     _tetra_y
00058Cr 1  18           	clc
00058Dr 1  69 01        	adc     #$01
00058Fr 1  8D rr rr     	sta     _tetra_y
000592r 1  20 rr rr     	jsr     _CheckCollision
000595r 1  AA           	tax
000596r 1  F0 3A        	beq     L05D2
000598r 1  A9 00        	lda     #$00
00059Ar 1  8D rr rr     	sta     _f_t_fix
00059Dr 1  A9 01        	lda     #$01
00059Fr 1  8D rr rr     	sta     _f_t_fix_mode
0005A2r 1  AD rr rr     	lda     _tetra_y
0005A5r 1  38           	sec
0005A6r 1  E9 01        	sbc     #$01
0005A8r 1  4C rr rr     	jmp     L0999
0005ABr 1  AD rr rr     L0997:	lda     _tetra_y
0005AEr 1  8D rr rr     	sta     _tmp1
0005B1r 1  4C rr rr     	jmp     L05D7
0005B4r 1  AD rr rr     L0998:	lda     _tetra_y
0005B7r 1  18           	clc
0005B8r 1  69 01        	adc     #$01
0005BAr 1  8D rr rr     	sta     _tetra_y
0005BDr 1  20 rr rr     L05D7:	jsr     _CheckCollision
0005C0r 1  AA           	tax
0005C1r 1  F0 F1        	beq     L0998
0005C3r 1  AD rr rr     	lda     _tetra_y
0005C6r 1  38           	sec
0005C7r 1  E9 01        	sbc     #$01
0005C9r 1  8D rr rr     	sta     _ghost_y
0005CCr 1  AD rr rr     	lda     _tmp1
0005CFr 1  8D rr rr     L0999:	sta     _tetra_y
0005D2r 1  20 rr rr     L05D2:	jsr     _UpdateTetraSprite
0005D5r 1  4C rr rr     	jmp     _UpdateGhostSprite
0005D8r 1               
0005D8r 1               .endproc
0005D8r 1               
0005D8r 1               ; ---------------------------------------------------------------
0005D8r 1               ; void __near__ UpdateTetraSprite (void)
0005D8r 1               ; ---------------------------------------------------------------
0005D8r 1               
0005D8r 1               .segment	"CODE"
0005D8r 1               
0005D8r 1               .proc	_UpdateTetraSprite: near
0005D8r 1               
0005D8r 1               .segment	"CODE"
0005D8r 1               
0005D8r 1  A9 00        	lda     #$00
0005DAr 1  8D rr rr     L09A2:	sta     _i
0005DDr 1  C9 04        	cmp     #$04
0005DFr 1  90 01        	bcc     L09A4
0005E1r 1  60           	rts
0005E2r 1  A2 00        L09A4:	ldx     #$00
0005E4r 1  AD rr rr     	lda     _i
0005E7r 1  20 rr rr     	jsr     aslax2
0005EAr 1  E8           	inx
0005EBr 1  E8           	inx
0005ECr 1  85 rr        	sta     sreg
0005EEr 1  86 rr        	stx     sreg+1
0005F0r 1  A2 00        	ldx     #$00
0005F2r 1  AD rr rr     	lda     _i
0005F5r 1  0A           	asl     a
0005F6r 1  90 01        	bcc     L099C
0005F8r 1  E8           	inx
0005F9r 1  85 rr        L099C:	sta     ptr1
0005FBr 1  8A           	txa
0005FCr 1  18           	clc
0005FDr 1  69 rr        	adc     #>(_tetramino)
0005FFr 1  85 rr        	sta     ptr1+1
000601r 1  A0 rr        	ldy     #<(_tetramino)
000603r 1  B1 rr        	lda     (ptr1),y
000605r 1  18           	clc
000606r 1  6D rr rr     	adc     _tetra_y
000609r 1  0A           	asl     a
00060Ar 1  0A           	asl     a
00060Br 1  0A           	asl     a
00060Cr 1  38           	sec
00060Dr 1  E9 01        	sbc     #$01
00060Fr 1  A0 00        	ldy     #$00
000611r 1  91 rr        	sta     (sreg),y
000613r 1  A2 00        	ldx     #$00
000615r 1  AD rr rr     	lda     _i
000618r 1  20 rr rr     	jsr     aslax2
00061Br 1  E8           	inx
00061Cr 1  E8           	inx
00061Dr 1  85 rr        	sta     sreg
00061Fr 1  86 rr        	stx     sreg+1
000621r 1  A2 00        	ldx     #$00
000623r 1  AD rr rr     	lda     _i
000626r 1  0A           	asl     a
000627r 1  90 02        	bcc     L099F
000629r 1  E8           	inx
00062Ar 1  18           	clc
00062Br 1  69 rr        L099F:	adc     #<(_tetramino)
00062Dr 1  85 rr        	sta     ptr1
00062Fr 1  8A           	txa
000630r 1  69 rr        	adc     #>(_tetramino)
000632r 1  85 rr        	sta     ptr1+1
000634r 1  C8           	iny
000635r 1  B1 rr        	lda     (ptr1),y
000637r 1  18           	clc
000638r 1  6D rr rr     	adc     _tetra_x
00063Br 1  18           	clc
00063Cr 1  69 07        	adc     #$07
00063Er 1  90 01        	bcc     L09A0
000640r 1  18           	clc
000641r 1  69 01        L09A0:	adc     #$01
000643r 1  0A           	asl     a
000644r 1  0A           	asl     a
000645r 1  0A           	asl     a
000646r 1  A0 03        	ldy     #$03
000648r 1  91 rr        	sta     (sreg),y
00064Ar 1  A2 00        	ldx     #$00
00064Cr 1  AD rr rr     	lda     _i
00064Fr 1  20 rr rr     	jsr     aslax2
000652r 1  E8           	inx
000653r 1  E8           	inx
000654r 1  85 rr        	sta     ptr1
000656r 1  86 rr        	stx     ptr1+1
000658r 1  A9 01        	lda     #$01
00065Ar 1  A8           	tay
00065Br 1  91 rr        	sta     (ptr1),y
00065Dr 1  A2 00        	ldx     #$00
00065Fr 1  AD rr rr     	lda     _i
000662r 1  20 rr rr     	jsr     aslax2
000665r 1  E8           	inx
000666r 1  E8           	inx
000667r 1  85 rr        	sta     ptr1
000669r 1  86 rr        	stx     ptr1+1
00066Br 1  A9 20        	lda     #$20
00066Dr 1  C8           	iny
00066Er 1  91 rr        	sta     (ptr1),y
000670r 1  AD rr rr     	lda     _i
000673r 1  18           	clc
000674r 1  69 01        	adc     #$01
000676r 1  4C rr rr     	jmp     L09A2
000679r 1               
000679r 1               .endproc
000679r 1               
000679r 1               ; ---------------------------------------------------------------
000679r 1               ; void __near__ UpdateGhostSprite (void)
000679r 1               ; ---------------------------------------------------------------
000679r 1               
000679r 1               .segment	"CODE"
000679r 1               
000679r 1               .proc	_UpdateGhostSprite: near
000679r 1               
000679r 1               .segment	"CODE"
000679r 1               
000679r 1  A9 00        	lda     #$00
00067Br 1  8D rr rr     L09AF:	sta     _i
00067Er 1  C9 04        	cmp     #$04
000680r 1  90 01        	bcc     L09BD
000682r 1  60           	rts
000683r 1  A2 00        L09BD:	ldx     #$00
000685r 1  AD rr rr     	lda     _tetra_y
000688r 1  CD rr rr     	cmp     _ghost_y
00068Br 1  D0 4A        	bne     L09AD
00068Dr 1  AD rr rr     	lda     _i
000690r 1  18           	clc
000691r 1  69 04        	adc     #$04
000693r 1  90 01        	bcc     L0667
000695r 1  E8           	inx
000696r 1  20 rr rr     L0667:	jsr     aslax2
000699r 1  E8           	inx
00069Ar 1  E8           	inx
00069Br 1  85 rr        	sta     ptr1
00069Dr 1  86 rr        	stx     ptr1+1
00069Fr 1  A9 00        	lda     #$00
0006A1r 1  A0 01        	ldy     #$01
0006A3r 1  91 rr        	sta     (ptr1),y
0006A5r 1  AA           	tax
0006A6r 1  AD rr rr     	lda     _i
0006A9r 1  18           	clc
0006AAr 1  69 04        	adc     #$04
0006ACr 1  90 01        	bcc     L066C
0006AEr 1  E8           	inx
0006AFr 1  20 rr rr     L066C:	jsr     aslax2
0006B2r 1  E8           	inx
0006B3r 1  E8           	inx
0006B4r 1  85 rr        	sta     ptr1
0006B6r 1  86 rr        	stx     ptr1+1
0006B8r 1  A9 00        	lda     #$00
0006BAr 1  A0 03        	ldy     #$03
0006BCr 1  91 rr        	sta     (ptr1),y
0006BEr 1  AA           	tax
0006BFr 1  AD rr rr     	lda     _i
0006C2r 1  18           	clc
0006C3r 1  69 04        	adc     #$04
0006C5r 1  90 01        	bcc     L0671
0006C7r 1  E8           	inx
0006C8r 1  20 rr rr     L0671:	jsr     aslax2
0006CBr 1  E8           	inx
0006CCr 1  E8           	inx
0006CDr 1  85 rr        	sta     ptr1
0006CFr 1  86 rr        	stx     ptr1+1
0006D1r 1  A9 00        	lda     #$00
0006D3r 1  A8           	tay
0006D4r 1  4C rr rr     	jmp     L09BC
0006D7r 1  AD rr rr     L09AD:	lda     _i
0006DAr 1  18           	clc
0006DBr 1  69 04        	adc     #$04
0006DDr 1  90 01        	bcc     L0687
0006DFr 1  E8           	inx
0006E0r 1  20 rr rr     L0687:	jsr     aslax2
0006E3r 1  E8           	inx
0006E4r 1  E8           	inx
0006E5r 1  85 rr        	sta     sreg
0006E7r 1  86 rr        	stx     sreg+1
0006E9r 1  A2 00        	ldx     #$00
0006EBr 1  AD rr rr     	lda     _i
0006EEr 1  0A           	asl     a
0006EFr 1  90 01        	bcc     L09A5
0006F1r 1  E8           	inx
0006F2r 1  85 rr        L09A5:	sta     ptr1
0006F4r 1  8A           	txa
0006F5r 1  18           	clc
0006F6r 1  69 rr        	adc     #>(_tetramino)
0006F8r 1  85 rr        	sta     ptr1+1
0006FAr 1  A0 rr        	ldy     #<(_tetramino)
0006FCr 1  B1 rr        	lda     (ptr1),y
0006FEr 1  18           	clc
0006FFr 1  6D rr rr     	adc     _ghost_y
000702r 1  0A           	asl     a
000703r 1  0A           	asl     a
000704r 1  0A           	asl     a
000705r 1  38           	sec
000706r 1  E9 01        	sbc     #$01
000708r 1  A0 00        	ldy     #$00
00070Ar 1  91 rr        	sta     (sreg),y
00070Cr 1  A2 00        	ldx     #$00
00070Er 1  AD rr rr     	lda     _i
000711r 1  18           	clc
000712r 1  69 04        	adc     #$04
000714r 1  90 01        	bcc     L0690
000716r 1  E8           	inx
000717r 1  20 rr rr     L0690:	jsr     aslax2
00071Ar 1  E8           	inx
00071Br 1  E8           	inx
00071Cr 1  85 rr        	sta     sreg
00071Er 1  86 rr        	stx     sreg+1
000720r 1  A2 00        	ldx     #$00
000722r 1  AD rr rr     	lda     _i
000725r 1  0A           	asl     a
000726r 1  90 02        	bcc     L09AA
000728r 1  E8           	inx
000729r 1  18           	clc
00072Ar 1  69 rr        L09AA:	adc     #<(_tetramino)
00072Cr 1  85 rr        	sta     ptr1
00072Er 1  8A           	txa
00072Fr 1  69 rr        	adc     #>(_tetramino)
000731r 1  85 rr        	sta     ptr1+1
000733r 1  C8           	iny
000734r 1  B1 rr        	lda     (ptr1),y
000736r 1  18           	clc
000737r 1  6D rr rr     	adc     _tetra_x
00073Ar 1  18           	clc
00073Br 1  69 07        	adc     #$07
00073Dr 1  90 01        	bcc     L09AB
00073Fr 1  18           	clc
000740r 1  69 01        L09AB:	adc     #$01
000742r 1  0A           	asl     a
000743r 1  0A           	asl     a
000744r 1  0A           	asl     a
000745r 1  A0 03        	ldy     #$03
000747r 1  91 rr        	sta     (sreg),y
000749r 1  A2 00        	ldx     #$00
00074Br 1  AD rr rr     	lda     _i
00074Er 1  18           	clc
00074Fr 1  69 04        	adc     #$04
000751r 1  90 01        	bcc     L069A
000753r 1  E8           	inx
000754r 1  20 rr rr     L069A:	jsr     aslax2
000757r 1  E8           	inx
000758r 1  E8           	inx
000759r 1  85 rr        	sta     ptr1
00075Br 1  86 rr        	stx     ptr1+1
00075Dr 1  A9 04        	lda     #$04
00075Fr 1  A0 01        	ldy     #$01
000761r 1  91 rr        L09BC:	sta     (ptr1),y
000763r 1  A2 00        	ldx     #$00
000765r 1  AD rr rr     	lda     _i
000768r 1  18           	clc
000769r 1  69 04        	adc     #$04
00076Br 1  90 01        	bcc     L069F
00076Dr 1  E8           	inx
00076Er 1  20 rr rr     L069F:	jsr     aslax2
000771r 1  E8           	inx
000772r 1  E8           	inx
000773r 1  85 rr        	sta     ptr1
000775r 1  86 rr        	stx     ptr1+1
000777r 1  A9 00        	lda     #$00
000779r 1  A0 02        	ldy     #$02
00077Br 1  91 rr        	sta     (ptr1),y
00077Dr 1  AD rr rr     	lda     _i
000780r 1  18           	clc
000781r 1  69 01        	adc     #$01
000783r 1  4C rr rr     	jmp     L09AF
000786r 1               
000786r 1               .endproc
000786r 1               
000786r 1               ; ---------------------------------------------------------------
000786r 1               ; void __near__ UpdateNextSprite (unsigned char)
000786r 1               ; ---------------------------------------------------------------
000786r 1               
000786r 1               .segment	"CODE"
000786r 1               
000786r 1               .proc	_UpdateNextSprite: near
000786r 1               
000786r 1               .segment	"BSS"
00014Br 1               
00014Br 1               L060F:
00014Br 1  00           	.res	1,$00
00014Cr 1               
00014Cr 1               .segment	"CODE"
000786r 1               
000786r 1  A0 00        	ldy     #$00
000788r 1  B1 rr        	lda     (sp),y
00078Ar 1  0A           	asl     a
00078Br 1  0A           	asl     a
00078Cr 1  18           	clc
00078Dr 1  69 08        	adc     #$08
00078Fr 1  8D rr rr     	sta     L060F
000792r 1  98           	tya
000793r 1  8D rr rr     L09C8:	sta     _i
000796r 1  C9 04        	cmp     #$04
000798r 1  90 03        	bcc     L09C9
00079Ar 1  4C rr rr     	jmp     incsp1
00079Dr 1  A2 00        L09C9:	ldx     #$00
00079Fr 1  AD rr rr     	lda     _i
0007A2r 1  18           	clc
0007A3r 1  6D rr rr     	adc     L060F
0007A6r 1  90 01        	bcc     L09BE
0007A8r 1  E8           	inx
0007A9r 1  20 rr rr     L09BE:	jsr     aslax2
0007ACr 1  E8           	inx
0007ADr 1  E8           	inx
0007AEr 1  85 rr        	sta     ptr2
0007B0r 1  86 rr        	stx     ptr2+1
0007B2r 1  A2 00        	ldx     #$00
0007B4r 1  A1 rr        	lda     (sp,x)
0007B6r 1  20 rr rr     	jsr     shlax2
0007B9r 1  85 rr        	sta     sreg
0007BBr 1  A2 00        	ldx     #$00
0007BDr 1  AD rr rr     	lda     _i
0007C0r 1  0A           	asl     a
0007C1r 1  90 01        	bcc     L09C2
0007C3r 1  E8           	inx
0007C4r 1  85 rr        L09C2:	sta     ptr1
0007C6r 1  8A           	txa
0007C7r 1  18           	clc
0007C8r 1  69 rr        	adc     #>(_tetramino)
0007CAr 1  85 rr        	sta     ptr1+1
0007CCr 1  A0 rr        	ldy     #<(_tetramino)
0007CEr 1  B1 rr        	lda     (ptr1),y
0007D0r 1  18           	clc
0007D1r 1  65 rr        	adc     sreg
0007D3r 1  90 01        	bcc     L09C5
0007D5r 1  18           	clc
0007D6r 1  69 06        L09C5:	adc     #$06
0007D8r 1  0A           	asl     a
0007D9r 1  0A           	asl     a
0007DAr 1  0A           	asl     a
0007DBr 1  A0 00        	ldy     #$00
0007DDr 1  91 rr        	sta     (ptr2),y
0007DFr 1  A2 00        	ldx     #$00
0007E1r 1  AD rr rr     	lda     _i
0007E4r 1  18           	clc
0007E5r 1  6D rr rr     	adc     L060F
0007E8r 1  90 01        	bcc     L09BF
0007EAr 1  E8           	inx
0007EBr 1  20 rr rr     L09BF:	jsr     aslax2
0007EEr 1  E8           	inx
0007EFr 1  E8           	inx
0007F0r 1  85 rr        	sta     sreg
0007F2r 1  86 rr        	stx     sreg+1
0007F4r 1  A2 00        	ldx     #$00
0007F6r 1  AD rr rr     	lda     _i
0007F9r 1  0A           	asl     a
0007FAr 1  90 02        	bcc     L09C6
0007FCr 1  E8           	inx
0007FDr 1  18           	clc
0007FEr 1  69 rr        L09C6:	adc     #<(_tetramino)
000800r 1  85 rr        	sta     ptr1
000802r 1  8A           	txa
000803r 1  69 rr        	adc     #>(_tetramino)
000805r 1  85 rr        	sta     ptr1+1
000807r 1  C8           	iny
000808r 1  B1 rr        	lda     (ptr1),y
00080Ar 1  18           	clc
00080Br 1  69 18        	adc     #$18
00080Dr 1  0A           	asl     a
00080Er 1  0A           	asl     a
00080Fr 1  0A           	asl     a
000810r 1  A0 03        	ldy     #$03
000812r 1  91 rr        	sta     (sreg),y
000814r 1  A2 00        	ldx     #$00
000816r 1  AD rr rr     	lda     _i
000819r 1  18           	clc
00081Ar 1  6D rr rr     	adc     L060F
00081Dr 1  90 01        	bcc     L09C0
00081Fr 1  E8           	inx
000820r 1  20 rr rr     L09C0:	jsr     aslax2
000823r 1  E8           	inx
000824r 1  E8           	inx
000825r 1  85 rr        	sta     ptr1
000827r 1  86 rr        	stx     ptr1+1
000829r 1  A9 01        	lda     #$01
00082Br 1  A8           	tay
00082Cr 1  91 rr        	sta     (ptr1),y
00082Er 1  A2 00        	ldx     #$00
000830r 1  AD rr rr     	lda     _i
000833r 1  18           	clc
000834r 1  6D rr rr     	adc     L060F
000837r 1  90 01        	bcc     L09C1
000839r 1  E8           	inx
00083Ar 1  20 rr rr     L09C1:	jsr     aslax2
00083Dr 1  E8           	inx
00083Er 1  E8           	inx
00083Fr 1  85 rr        	sta     ptr1
000841r 1  86 rr        	stx     ptr1+1
000843r 1  88           	dey
000844r 1  B1 rr        	lda     (sp),y
000846r 1  18           	clc
000847r 1  69 01        	adc     #$01
000849r 1  A0 02        	ldy     #$02
00084Br 1  91 rr        	sta     (ptr1),y
00084Dr 1  AD rr rr     	lda     _i
000850r 1  18           	clc
000851r 1  69 01        	adc     #$01
000853r 1  4C rr rr     	jmp     L09C8
000856r 1               
000856r 1               .endproc
000856r 1               
000856r 1               ; ---------------------------------------------------------------
000856r 1               ; void __near__ UpdateHoldSprite (unsigned char)
000856r 1               ; ---------------------------------------------------------------
000856r 1               
000856r 1               .segment	"CODE"
000856r 1               
000856r 1               .proc	_UpdateHoldSprite: near
000856r 1               
000856r 1               .segment	"CODE"
000856r 1               
000856r 1  A9 00        	lda     #$00
000858r 1  8D rr rr     L09CE:	sta     _i
00085Br 1  C9 04        	cmp     #$04
00085Dr 1  90 03        	bcc     L09CF
00085Fr 1  4C rr rr     	jmp     incsp1
000862r 1  A2 00        L09CF:	ldx     #$00
000864r 1  AD rr rr     	lda     _i
000867r 1  18           	clc
000868r 1  69 10        	adc     #$10
00086Ar 1  90 01        	bcc     L0640
00086Cr 1  E8           	inx
00086Dr 1  20 rr rr     L0640:	jsr     aslax2
000870r 1  E8           	inx
000871r 1  E8           	inx
000872r 1  85 rr        	sta     sreg
000874r 1  86 rr        	stx     sreg+1
000876r 1  A2 00        	ldx     #$00
000878r 1  AD rr rr     	lda     _i
00087Br 1  0A           	asl     a
00087Cr 1  90 01        	bcc     L09CA
00087Er 1  E8           	inx
00087Fr 1  85 rr        L09CA:	sta     ptr1
000881r 1  8A           	txa
000882r 1  18           	clc
000883r 1  69 rr        	adc     #>(_tetramino)
000885r 1  85 rr        	sta     ptr1+1
000887r 1  A0 rr        	ldy     #<(_tetramino)
000889r 1  B1 rr        	lda     (ptr1),y
00088Br 1  18           	clc
00088Cr 1  69 06        	adc     #$06
00088Er 1  0A           	asl     a
00088Fr 1  0A           	asl     a
000890r 1  0A           	asl     a
000891r 1  A0 00        	ldy     #$00
000893r 1  91 rr        	sta     (sreg),y
000895r 1  A2 00        	ldx     #$00
000897r 1  AD rr rr     	lda     _i
00089Ar 1  18           	clc
00089Br 1  69 10        	adc     #$10
00089Dr 1  90 01        	bcc     L0649
00089Fr 1  E8           	inx
0008A0r 1  20 rr rr     L0649:	jsr     aslax2
0008A3r 1  E8           	inx
0008A4r 1  E8           	inx
0008A5r 1  85 rr        	sta     sreg
0008A7r 1  86 rr        	stx     sreg+1
0008A9r 1  A2 00        	ldx     #$00
0008ABr 1  AD rr rr     	lda     _i
0008AEr 1  0A           	asl     a
0008AFr 1  90 02        	bcc     L09CC
0008B1r 1  E8           	inx
0008B2r 1  18           	clc
0008B3r 1  69 rr        L09CC:	adc     #<(_tetramino)
0008B5r 1  85 rr        	sta     ptr1
0008B7r 1  8A           	txa
0008B8r 1  69 rr        	adc     #>(_tetramino)
0008BAr 1  85 rr        	sta     ptr1+1
0008BCr 1  C8           	iny
0008BDr 1  B1 rr        	lda     (ptr1),y
0008BFr 1  18           	clc
0008C0r 1  69 01        	adc     #$01
0008C2r 1  0A           	asl     a
0008C3r 1  0A           	asl     a
0008C4r 1  0A           	asl     a
0008C5r 1  A0 03        	ldy     #$03
0008C7r 1  91 rr        	sta     (sreg),y
0008C9r 1  A2 00        	ldx     #$00
0008CBr 1  AD rr rr     	lda     _i
0008CEr 1  18           	clc
0008CFr 1  69 10        	adc     #$10
0008D1r 1  90 01        	bcc     L0652
0008D3r 1  E8           	inx
0008D4r 1  20 rr rr     L0652:	jsr     aslax2
0008D7r 1  E8           	inx
0008D8r 1  E8           	inx
0008D9r 1  85 rr        	sta     ptr1
0008DBr 1  86 rr        	stx     ptr1+1
0008DDr 1  A0 00        	ldy     #$00
0008DFr 1  B1 rr        	lda     (sp),y
0008E1r 1  C8           	iny
0008E2r 1  91 rr        	sta     (ptr1),y
0008E4r 1  A2 00        	ldx     #$00
0008E6r 1  AD rr rr     	lda     _i
0008E9r 1  18           	clc
0008EAr 1  69 10        	adc     #$10
0008ECr 1  90 01        	bcc     L0657
0008EEr 1  E8           	inx
0008EFr 1  20 rr rr     L0657:	jsr     aslax2
0008F2r 1  E8           	inx
0008F3r 1  E8           	inx
0008F4r 1  85 rr        	sta     ptr1
0008F6r 1  86 rr        	stx     ptr1+1
0008F8r 1  A9 03        	lda     #$03
0008FAr 1  C8           	iny
0008FBr 1  91 rr        	sta     (ptr1),y
0008FDr 1  AD rr rr     	lda     _i
000900r 1  18           	clc
000901r 1  69 01        	adc     #$01
000903r 1  4C rr rr     	jmp     L09CE
000906r 1               
000906r 1               .endproc
000906r 1               
000906r 1               ; ---------------------------------------------------------------
000906r 1               ; void __near__ ClearTetraSprite (void)
000906r 1               ; ---------------------------------------------------------------
000906r 1               
000906r 1               .segment	"CODE"
000906r 1               
000906r 1               .proc	_ClearTetraSprite: near
000906r 1               
000906r 1               .segment	"CODE"
000906r 1               
000906r 1  A9 00        	lda     #$00
000908r 1  8D rr rr     L09D1:	sta     _i
00090Br 1  C9 08        	cmp     #$08
00090Dr 1  B0 1D        	bcs     L06AE
00090Fr 1  A2 00        	ldx     #$00
000911r 1  AD rr rr     	lda     _i
000914r 1  20 rr rr     	jsr     aslax2
000917r 1  E8           	inx
000918r 1  E8           	inx
000919r 1  85 rr        	sta     ptr1
00091Br 1  86 rr        	stx     ptr1+1
00091Dr 1  A9 00        	lda     #$00
00091Fr 1  A0 01        	ldy     #$01
000921r 1  91 rr        	sta     (ptr1),y
000923r 1  AD rr rr     	lda     _i
000926r 1  18           	clc
000927r 1  69 01        	adc     #$01
000929r 1  4C rr rr     	jmp     L09D1
00092Cr 1  60           L06AE:	rts
00092Dr 1               
00092Dr 1               .endproc
00092Dr 1               
00092Dr 1               ; ---------------------------------------------------------------
00092Dr 1               ; unsigned char __near__ CheckCollision (void)
00092Dr 1               ; ---------------------------------------------------------------
00092Dr 1               
00092Dr 1               .segment	"CODE"
00092Dr 1               
00092Dr 1               .proc	_CheckCollision: near
00092Dr 1               
00092Dr 1               .segment	"CODE"
00092Dr 1               
00092Dr 1  A9 00        	lda     #$00
00092Fr 1  8D rr rr     	sta     _block_i
000932r 1  AA           	tax
000933r 1  AD rr rr     L09D8:	lda     _block_i
000936r 1  C9 04        	cmp     #$04
000938r 1  B0 6F        	bcs     L09DC
00093Ar 1  AD rr rr     	lda     _block_i
00093Dr 1  0A           	asl     a
00093Er 1  90 02        	bcc     L09D7
000940r 1  E8           	inx
000941r 1  18           	clc
000942r 1  69 rr        L09D7:	adc     #<(_tetramino)
000944r 1  85 rr        	sta     ptr1
000946r 1  8A           	txa
000947r 1  69 rr        	adc     #>(_tetramino)
000949r 1  85 rr        	sta     ptr1+1
00094Br 1  A0 01        	ldy     #$01
00094Dr 1  B1 rr        	lda     (ptr1),y
00094Fr 1  18           	clc
000950r 1  6D rr rr     	adc     _tetra_x
000953r 1  8D rr rr     	sta     _block_x
000956r 1  C9 0A        	cmp     #$0A
000958r 1  A2 00        	ldx     #$00
00095Ar 1  90 02        	bcc     L09D9
00095Cr 1  98           	tya
00095Dr 1  60           	rts
00095Er 1  AD rr rr     L09D9:	lda     _block_i
000961r 1  0A           	asl     a
000962r 1  90 01        	bcc     L09D6
000964r 1  E8           	inx
000965r 1  85 rr        L09D6:	sta     ptr1
000967r 1  8A           	txa
000968r 1  18           	clc
000969r 1  69 rr        	adc     #>(_tetramino)
00096Br 1  85 rr        	sta     ptr1+1
00096Dr 1  A0 rr        	ldy     #<(_tetramino)
00096Fr 1  B1 rr        	lda     (ptr1),y
000971r 1  18           	clc
000972r 1  6D rr rr     	adc     _tetra_y
000975r 1  8D rr rr     	sta     _block_y
000978r 1  C9 18        	cmp     #$18
00097Ar 1  A2 00        	ldx     #$00
00097Cr 1  90 03        	bcc     L09DA
00097Er 1  A9 01        	lda     #$01
000980r 1  60           	rts
000981r 1  AD rr rr     L09DA:	lda     _block_y
000984r 1  20 rr rr     	jsr     mulax10
000987r 1  18           	clc
000988r 1  69 rr        	adc     #<(_playfield)
00098Ar 1  85 rr        	sta     ptr1
00098Cr 1  8A           	txa
00098Dr 1  69 rr        	adc     #>(_playfield)
00098Fr 1  85 rr        	sta     ptr1+1
000991r 1  AC rr rr     	ldy     _block_x
000994r 1  A2 00        	ldx     #$00
000996r 1  B1 rr        	lda     (ptr1),y
000998r 1  F0 03        	beq     L09DB
00099Ar 1  A9 01        	lda     #$01
00099Cr 1  60           	rts
00099Dr 1  AD rr rr     L09DB:	lda     _block_i
0009A0r 1  18           	clc
0009A1r 1  69 01        	adc     #$01
0009A3r 1  8D rr rr     	sta     _block_i
0009A6r 1  4C rr rr     	jmp     L09D8
0009A9r 1  8A           L09DC:	txa
0009AAr 1  60           	rts
0009ABr 1               
0009ABr 1               .endproc
0009ABr 1               
0009ABr 1               ; ---------------------------------------------------------------
0009ABr 1               ; void __near__ PlaceTetramino (void)
0009ABr 1               ; ---------------------------------------------------------------
0009ABr 1               
0009ABr 1               .segment	"CODE"
0009ABr 1               
0009ABr 1               .proc	_PlaceTetramino: near
0009ABr 1               
0009ABr 1               .segment	"CODE"
0009ABr 1               
0009ABr 1  A9 00        	lda     #$00
0009ADr 1  8D rr rr     L09E4:	sta     _block_i
0009B0r 1  C9 04        	cmp     #$04
0009B2r 1  B0 65        	bcs     L06D8
0009B4r 1  A2 00        	ldx     #$00
0009B6r 1  AD rr rr     	lda     _block_i
0009B9r 1  0A           	asl     a
0009BAr 1  90 02        	bcc     L09E2
0009BCr 1  E8           	inx
0009BDr 1  18           	clc
0009BEr 1  69 rr        L09E2:	adc     #<(_tetramino)
0009C0r 1  85 rr        	sta     ptr1
0009C2r 1  8A           	txa
0009C3r 1  69 rr        	adc     #>(_tetramino)
0009C5r 1  85 rr        	sta     ptr1+1
0009C7r 1  A0 01        	ldy     #$01
0009C9r 1  B1 rr        	lda     (ptr1),y
0009CBr 1  18           	clc
0009CCr 1  6D rr rr     	adc     _tetra_x
0009CFr 1  8D rr rr     	sta     _block_x
0009D2r 1  A2 00        	ldx     #$00
0009D4r 1  AD rr rr     	lda     _block_i
0009D7r 1  0A           	asl     a
0009D8r 1  90 01        	bcc     L09E1
0009DAr 1  E8           	inx
0009DBr 1  85 rr        L09E1:	sta     ptr1
0009DDr 1  8A           	txa
0009DEr 1  18           	clc
0009DFr 1  69 rr        	adc     #>(_tetramino)
0009E1r 1  85 rr        	sta     ptr1+1
0009E3r 1  A0 rr        	ldy     #<(_tetramino)
0009E5r 1  B1 rr        	lda     (ptr1),y
0009E7r 1  18           	clc
0009E8r 1  6D rr rr     	adc     _tetra_y
0009EBr 1  8D rr rr     	sta     _block_y
0009EEr 1  A2 00        	ldx     #$00
0009F0r 1  AD rr rr     	lda     _block_y
0009F3r 1  20 rr rr     	jsr     mulax10
0009F6r 1  18           	clc
0009F7r 1  69 rr        	adc     #<(_playfield)
0009F9r 1  A8           	tay
0009FAr 1  8A           	txa
0009FBr 1  69 rr        	adc     #>(_playfield)
0009FDr 1  AA           	tax
0009FEr 1  98           	tya
0009FFr 1  18           	clc
000A00r 1  6D rr rr     	adc     _block_x
000A03r 1  90 01        	bcc     L09DF
000A05r 1  E8           	inx
000A06r 1  85 rr        L09DF:	sta     ptr1
000A08r 1  86 rr        	stx     ptr1+1
000A0Ar 1  A9 01        	lda     #$01
000A0Cr 1  A0 00        	ldy     #$00
000A0Er 1  91 rr        	sta     (ptr1),y
000A10r 1  AD rr rr     	lda     _block_i
000A13r 1  18           	clc
000A14r 1  69 01        	adc     #$01
000A16r 1  4C rr rr     	jmp     L09E4
000A19r 1  60           L06D8:	rts
000A1Ar 1               
000A1Ar 1               .endproc
000A1Ar 1               
000A1Ar 1               ; ---------------------------------------------------------------
000A1Ar 1               ; void __near__ ClearPlayfield (void)
000A1Ar 1               ; ---------------------------------------------------------------
000A1Ar 1               
000A1Ar 1               .segment	"CODE"
000A1Ar 1               
000A1Ar 1               .proc	_ClearPlayfield: near
000A1Ar 1               
000A1Ar 1               .segment	"CODE"
000A1Ar 1               
000A1Ar 1  A9 rr        	lda     #<(_playfield)
000A1Cr 1  8D rr rr     	sta     _ptr1
000A1Fr 1  A9 rr        	lda     #>(_playfield)
000A21r 1  8D rr rr     	sta     _ptr1+1
000A24r 1  A9 F0        	lda     #$F0
000A26r 1  4C rr rr     	jmp     L09E5
000A29r 1  AD rr rr     L0729:	lda     _ptr1
000A2Cr 1  85 rr        	sta     ptr1
000A2Er 1  AD rr rr     	lda     _ptr1+1
000A31r 1  85 rr        	sta     ptr1+1
000A33r 1  A9 00        	lda     #$00
000A35r 1  A8           	tay
000A36r 1  91 rr        	sta     (ptr1),y
000A38r 1  AD rr rr     	lda     _ptr1
000A3Br 1  AE rr rr     	ldx     _ptr1+1
000A3Er 1  18           	clc
000A3Fr 1  69 01        	adc     #$01
000A41r 1  90 01        	bcc     L0730
000A43r 1  E8           	inx
000A44r 1  8D rr rr     L0730:	sta     _ptr1
000A47r 1  8E rr rr     	stx     _ptr1+1
000A4Ar 1  AD rr rr     	lda     _i
000A4Dr 1  38           	sec
000A4Er 1  E9 01        	sbc     #$01
000A50r 1  8D rr rr     L09E5:	sta     _i
000A53r 1  AD rr rr     	lda     _i
000A56r 1  D0 D1        	bne     L0729
000A58r 1  60           	rts
000A59r 1               
000A59r 1               .endproc
000A59r 1               
000A59r 1               ; ---------------------------------------------------------------
000A59r 1               ; void __near__ DrawTetraminoAtPlayfield (void)
000A59r 1               ; ---------------------------------------------------------------
000A59r 1               
000A59r 1               .segment	"CODE"
000A59r 1               
000A59r 1               .proc	_DrawTetraminoAtPlayfield: near
000A59r 1               
000A59r 1               .segment	"CODE"
000A59r 1               
000A59r 1  A9 00        	lda     #$00
000A5Br 1  8D rr rr     L09EC:	sta     _block_i
000A5Er 1  C9 04        	cmp     #$04
000A60r 1  90 01        	bcc     L09ED
000A62r 1  60           	rts
000A63r 1  A2 00        L09ED:	ldx     #$00
000A65r 1  AD rr rr     	lda     _block_i
000A68r 1  0A           	asl     a
000A69r 1  90 02        	bcc     L09EA
000A6Br 1  E8           	inx
000A6Cr 1  18           	clc
000A6Dr 1  69 rr        L09EA:	adc     #<(_tetramino)
000A6Fr 1  85 rr        	sta     ptr1
000A71r 1  8A           	txa
000A72r 1  69 rr        	adc     #>(_tetramino)
000A74r 1  85 rr        	sta     ptr1+1
000A76r 1  A0 01        	ldy     #$01
000A78r 1  B1 rr        	lda     (ptr1),y
000A7Ar 1  18           	clc
000A7Br 1  6D rr rr     	adc     _tetra_x
000A7Er 1  18           	clc
000A7Fr 1  69 0A        	adc     #$0A
000A81r 1  8D rr rr     	sta     _block_x
000A84r 1  A2 00        	ldx     #$00
000A86r 1  AD rr rr     	lda     _block_i
000A89r 1  0A           	asl     a
000A8Ar 1  90 01        	bcc     L09E9
000A8Cr 1  E8           	inx
000A8Dr 1  85 rr        L09E9:	sta     ptr1
000A8Fr 1  8A           	txa
000A90r 1  18           	clc
000A91r 1  69 rr        	adc     #>(_tetramino)
000A93r 1  85 rr        	sta     ptr1+1
000A95r 1  A0 rr        	ldy     #<(_tetramino)
000A97r 1  B1 rr        	lda     (ptr1),y
000A99r 1  18           	clc
000A9Ar 1  6D rr rr     	adc     _tetra_y
000A9Dr 1  8D rr rr     	sta     _block_y
000AA0r 1  AD rr rr     	lda     _block_x
000AA3r 1  85 rr        	sta     ptr1
000AA5r 1  A9 20        	lda     #$20
000AA7r 1  85 rr        	sta     ptr1+1
000AA9r 1  A2 00        	ldx     #$00
000AABr 1  AD rr rr     	lda     _block_y
000AAEr 1  20 rr rr     	jsr     aslax4
000AB1r 1  86 rr        	stx     tmp1
000AB3r 1  0A           	asl     a
000AB4r 1  26 rr        	rol     tmp1
000AB6r 1  05 rr        	ora     ptr1
000AB8r 1  A5 rr        	lda     tmp1
000ABAr 1  05 rr        	ora     ptr1+1
000ABCr 1  8D 06 20     	sta     $2006
000ABFr 1  A2 00        	ldx     #$00
000AC1r 1  AD rr rr     	lda     _block_x
000AC4r 1  85 rr        	sta     ptr1
000AC6r 1  AD rr rr     	lda     _block_y
000AC9r 1  20 rr rr     	jsr     aslax4
000ACCr 1  86 rr        	stx     tmp1
000ACEr 1  0A           	asl     a
000ACFr 1  26 rr        	rol     tmp1
000AD1r 1  05 rr        	ora     ptr1
000AD3r 1  8D 06 20     	sta     $2006
000AD6r 1  A5 rr        	lda     tmp1
000AD8r 1  05 rr        	ora     ptr1+1
000ADAr 1  A9 01        	lda     #$01
000ADCr 1  8D 07 20     	sta     $2007
000ADFr 1  AD rr rr     	lda     _block_i
000AE2r 1  18           	clc
000AE3r 1  69 01        	adc     #$01
000AE5r 1  4C rr rr     	jmp     L09EC
000AE8r 1               
000AE8r 1               .endproc
000AE8r 1               
000AE8r 1               ; ---------------------------------------------------------------
000AE8r 1               ; unsigned char __near__ rand_t (void)
000AE8r 1               ; ---------------------------------------------------------------
000AE8r 1               
000AE8r 1               .segment	"CODE"
000AE8r 1               
000AE8r 1               .proc	_rand_t: near
000AE8r 1               
000AE8r 1               .segment	"BSS"
00014Cr 1               
00014Cr 1               L0762:
00014Cr 1  00           	.res	1,$00
00014Dr 1               L0764:
00014Dr 1  00           	.res	1,$00
00014Er 1               
00014Er 1               .segment	"CODE"
000AE8r 1               
000AE8r 1  AD rr rr     	lda     _tetra_rnd
000AEBr 1  8D rr rr     	sta     L0762
000AEEr 1  A9 00        	lda     #$00
000AF0r 1  8D rr rr     	sta     L0764
000AF3r 1  4C rr rr     	jmp     L076F
000AF6r 1  AD rr rr     L09F1:	lda     L0764
000AF9r 1  18           	clc
000AFAr 1  69 01        	adc     #$01
000AFCr 1  8D rr rr     	sta     L0764
000AFFr 1  C9 10        	cmp     #$10
000B01r 1  D0 08        	bne     L076F
000B03r 1  A9 00        	lda     #$00
000B05r 1  8D rr rr     	sta     L0764
000B08r 1  20 rr rr     	jsr     _srand
000B0Br 1  20 rr rr     L076F:	jsr     _rand
000B0Er 1  8D rr rr     	sta     _tetra_rnd
000B11r 1  AD rr rr     	lda     L0762
000B14r 1  CD rr rr     	cmp     _tetra_rnd
000B17r 1  F0 DD        	beq     L09F1
000B19r 1  AD rr rr     	lda     _tetra_rnd
000B1Cr 1  F0 D8        	beq     L09F1
000B1Er 1  A2 00        	ldx     #$00
000B20r 1  AD rr rr     	lda     _tetra_rnd
000B23r 1  38           	sec
000B24r 1  E9 01        	sbc     #$01
000B26r 1  B0 01        	bcs     L0761
000B28r 1  CA           	dex
000B29r 1  60           L0761:	rts
000B2Ar 1               
000B2Ar 1               .endproc
000B2Ar 1               
000B2Ar 1               ; ---------------------------------------------------------------
000B2Ar 1               ; void __near__ Rotate (int)
000B2Ar 1               ; ---------------------------------------------------------------
000B2Ar 1               
000B2Ar 1               .segment	"CODE"
000B2Ar 1               
000B2Ar 1               .proc	_Rotate: near
000B2Ar 1               
000B2Ar 1               .segment	"BSS"
00014Er 1               
00014Er 1               L0779:
00014Er 1  00           	.res	1,$00
00014Fr 1               L077A:
00014Fr 1  00           	.res	1,$00
000150r 1               L077B:
000150r 1  00           	.res	1,$00
000151r 1               
000151r 1               .segment	"CODE"
000B2Ar 1               
000B2Ar 1  A9 04        	lda     #$04
000B2Cr 1  8D rr rr     	sta     L0779
000B2Fr 1  8D rr rr     	sta     L077A
000B32r 1  AC rr rr     	ldy     _tetra_i
000B35r 1  B9 rr rr     	lda     _tetramino_sizes,y
000B38r 1  8D rr rr     	sta     L077B
000B3Br 1  C9 02        	cmp     #$02
000B3Dr 1  D0 03        	bne     L0A15
000B3Fr 1  4C rr rr     	jmp     incsp2
000B42r 1  A9 00        L0A15:	lda     #$00
000B44r 1  8D rr rr     L0A12:	sta     _block_i
000B47r 1  C9 04        	cmp     #$04
000B49r 1  90 03 4C rr  	jcs     L0A0F
000B4Dr 1  rr           
000B4Er 1  A0 01        	ldy     #$01
000B50r 1  B1 rr        	lda     (sp),y
000B52r 1  D0 6B        	bne     L0A14
000B54r 1  88           	dey
000B55r 1  B1 rr        	lda     (sp),y
000B57r 1  C9 01        	cmp     #$01
000B59r 1  D0 62        	bne     L078E
000B5Br 1  A2 00        	ldx     #$00
000B5Dr 1  AD rr rr     	lda     _block_i
000B60r 1  0A           	asl     a
000B61r 1  90 01        	bcc     L09F4
000B63r 1  E8           	inx
000B64r 1  85 rr        L09F4:	sta     ptr1
000B66r 1  8A           	txa
000B67r 1  18           	clc
000B68r 1  69 rr        	adc     #>(_tetramino)
000B6Ar 1  85 rr        	sta     ptr1+1
000B6Cr 1  A0 rr        	ldy     #<(_tetramino)
000B6Er 1  B1 rr        	lda     (ptr1),y
000B70r 1  8D rr rr     	sta     _block_x
000B73r 1  A2 00        	ldx     #$00
000B75r 1  AD rr rr     	lda     _block_i
000B78r 1  0A           	asl     a
000B79r 1  90 02        	bcc     L0A02
000B7Br 1  E8           	inx
000B7Cr 1  18           	clc
000B7Dr 1  69 rr        L0A02:	adc     #<(_tetramino)
000B7Fr 1  85 rr        	sta     sreg
000B81r 1  8A           	txa
000B82r 1  69 rr        	adc     #>(_tetramino)
000B84r 1  85 rr        	sta     sreg+1
000B86r 1  A2 00        	ldx     #$00
000B88r 1  AD rr rr     	lda     _block_i
000B8Br 1  0A           	asl     a
000B8Cr 1  90 02        	bcc     L0A03
000B8Er 1  E8           	inx
000B8Fr 1  18           	clc
000B90r 1  69 rr        L0A03:	adc     #<(_tetramino)
000B92r 1  85 rr        	sta     ptr1
000B94r 1  8A           	txa
000B95r 1  69 rr        	adc     #>(_tetramino)
000B97r 1  85 rr        	sta     ptr1+1
000B99r 1  A0 01        	ldy     #$01
000B9Br 1  B1 rr        	lda     (ptr1),y
000B9Dr 1  88           	dey
000B9Er 1  91 rr        	sta     (sreg),y
000BA0r 1  A2 00        	ldx     #$00
000BA2r 1  AD rr rr     	lda     _block_i
000BA5r 1  0A           	asl     a
000BA6r 1  90 02        	bcc     L0A04
000BA8r 1  E8           	inx
000BA9r 1  18           	clc
000BAAr 1  69 rr        L0A04:	adc     #<(_tetramino)
000BACr 1  85 rr        	sta     ptr1
000BAEr 1  8A           	txa
000BAFr 1  69 rr        	adc     #>(_tetramino)
000BB1r 1  85 rr        	sta     ptr1+1
000BB3r 1  AD rr rr     	lda     L077B
000BB6r 1  38           	sec
000BB7r 1  ED rr rr     	sbc     _block_x
000BBAr 1  C8           	iny
000BBBr 1  91 rr        	sta     (ptr1),y
000BBDr 1  A0 01        L078E:	ldy     #$01
000BBFr 1  B1 rr        L0A14:	lda     (sp),y
000BC1r 1  D0 69        	bne     L079F
000BC3r 1  88           	dey
000BC4r 1  B1 rr        	lda     (sp),y
000BC6r 1  C9 02        	cmp     #$02
000BC8r 1  D0 62        	bne     L079F
000BCAr 1  A2 00        	ldx     #$00
000BCCr 1  AD rr rr     	lda     _block_i
000BCFr 1  0A           	asl     a
000BD0r 1  90 02        	bcc     L0A05
000BD2r 1  E8           	inx
000BD3r 1  18           	clc
000BD4r 1  69 rr        L0A05:	adc     #<(_tetramino)
000BD6r 1  85 rr        	sta     ptr1
000BD8r 1  8A           	txa
000BD9r 1  69 rr        	adc     #>(_tetramino)
000BDBr 1  85 rr        	sta     ptr1+1
000BDDr 1  C8           	iny
000BDEr 1  B1 rr        	lda     (ptr1),y
000BE0r 1  8D rr rr     	sta     _block_y
000BE3r 1  A2 00        	ldx     #$00
000BE5r 1  AD rr rr     	lda     _block_i
000BE8r 1  0A           	asl     a
000BE9r 1  90 02        	bcc     L0A06
000BEBr 1  E8           	inx
000BECr 1  18           	clc
000BEDr 1  69 rr        L0A06:	adc     #<(_tetramino)
000BEFr 1  85 rr        	sta     sreg
000BF1r 1  8A           	txa
000BF2r 1  69 rr        	adc     #>(_tetramino)
000BF4r 1  85 rr        	sta     sreg+1
000BF6r 1  A2 00        	ldx     #$00
000BF8r 1  AD rr rr     	lda     _block_i
000BFBr 1  0A           	asl     a
000BFCr 1  90 01        	bcc     L09FA
000BFEr 1  E8           	inx
000BFFr 1  85 rr        L09FA:	sta     ptr1
000C01r 1  8A           	txa
000C02r 1  18           	clc
000C03r 1  69 rr        	adc     #>(_tetramino)
000C05r 1  85 rr        	sta     ptr1+1
000C07r 1  A0 rr        	ldy     #<(_tetramino)
000C09r 1  B1 rr        	lda     (ptr1),y
000C0Br 1  A0 01        	ldy     #$01
000C0Dr 1  91 rr        	sta     (sreg),y
000C0Fr 1  A2 00        	ldx     #$00
000C11r 1  AD rr rr     	lda     _block_i
000C14r 1  0A           	asl     a
000C15r 1  90 02        	bcc     L0A07
000C17r 1  E8           	inx
000C18r 1  18           	clc
000C19r 1  69 rr        L0A07:	adc     #<(_tetramino)
000C1Br 1  85 rr        	sta     ptr1
000C1Dr 1  8A           	txa
000C1Er 1  69 rr        	adc     #>(_tetramino)
000C20r 1  85 rr        	sta     ptr1+1
000C22r 1  AD rr rr     	lda     L077B
000C25r 1  38           	sec
000C26r 1  ED rr rr     	sbc     _block_y
000C29r 1  88           	dey
000C2Ar 1  91 rr        	sta     (ptr1),y
000C2Cr 1  A2 00        L079F:	ldx     #$00
000C2Er 1  AD rr rr     	lda     _block_i
000C31r 1  0A           	asl     a
000C32r 1  90 01        	bcc     L09FC
000C34r 1  E8           	inx
000C35r 1  85 rr        L09FC:	sta     ptr1
000C37r 1  8A           	txa
000C38r 1  18           	clc
000C39r 1  69 rr        	adc     #>(_tetramino)
000C3Br 1  85 rr        	sta     ptr1+1
000C3Dr 1  A0 rr        	ldy     #<(_tetramino)
000C3Fr 1  A2 00        	ldx     #$00
000C41r 1  B1 rr        	lda     (ptr1),y
000C43r 1  CD rr rr     	cmp     L0779
000C46r 1  B0 18        	bcs     L0A0D
000C48r 1  AD rr rr     	lda     _block_i
000C4Br 1  0A           	asl     a
000C4Cr 1  90 01        	bcc     L09FD
000C4Er 1  E8           	inx
000C4Fr 1  85 rr        L09FD:	sta     ptr1
000C51r 1  8A           	txa
000C52r 1  18           	clc
000C53r 1  69 rr        	adc     #>(_tetramino)
000C55r 1  85 rr        	sta     ptr1+1
000C57r 1  A0 rr        	ldy     #<(_tetramino)
000C59r 1  B1 rr        	lda     (ptr1),y
000C5Br 1  8D rr rr     	sta     L0779
000C5Er 1  A2 00        	ldx     #$00
000C60r 1  AD rr rr     L0A0D:	lda     _block_i
000C63r 1  0A           	asl     a
000C64r 1  90 02        	bcc     L0A08
000C66r 1  E8           	inx
000C67r 1  18           	clc
000C68r 1  69 rr        L0A08:	adc     #<(_tetramino)
000C6Ar 1  85 rr        	sta     ptr1
000C6Cr 1  8A           	txa
000C6Dr 1  69 rr        	adc     #>(_tetramino)
000C6Fr 1  85 rr        	sta     ptr1+1
000C71r 1  A0 01        	ldy     #$01
000C73r 1  A2 00        	ldx     #$00
000C75r 1  B1 rr        	lda     (ptr1),y
000C77r 1  CD rr rr     	cmp     L077A
000C7Ar 1  B0 16        	bcs     L0A0E
000C7Cr 1  AD rr rr     	lda     _block_i
000C7Fr 1  0A           	asl     a
000C80r 1  90 02        	bcc     L0A09
000C82r 1  E8           	inx
000C83r 1  18           	clc
000C84r 1  69 rr        L0A09:	adc     #<(_tetramino)
000C86r 1  85 rr        	sta     ptr1
000C88r 1  8A           	txa
000C89r 1  69 rr        	adc     #>(_tetramino)
000C8Br 1  85 rr        	sta     ptr1+1
000C8Dr 1  B1 rr        	lda     (ptr1),y
000C8Fr 1  8D rr rr     	sta     L077A
000C92r 1  AD rr rr     L0A0E:	lda     _block_i
000C95r 1  18           	clc
000C96r 1  69 01        	adc     #$01
000C98r 1  4C rr rr     	jmp     L0A12
000C9Br 1  AD rr rr     L0A0F:	lda     L0779
000C9Er 1  D0 08        	bne     L0A10
000CA0r 1  AD rr rr     	lda     L077A
000CA3r 1  D0 03 4C rr  	jeq     incsp2
000CA7r 1  rr           
000CA8r 1  AC rr rr     L0A10:	ldy     _tetra_i
000CABr 1  B9 rr rr     	lda     _tetramino_sizes,y
000CAEr 1  4A           	lsr     a
000CAFr 1  49 FF        	eor     #$FF
000CB1r 1  38           	sec
000CB2r 1  6D rr rr     	adc     L077A
000CB5r 1  8D rr rr     	sta     L077A
000CB8r 1  AC rr rr     	ldy     _tetra_i
000CBBr 1  B9 rr rr     	lda     _tetramino_sizes,y
000CBEr 1  4A           	lsr     a
000CBFr 1  49 FF        	eor     #$FF
000CC1r 1  38           	sec
000CC2r 1  6D rr rr     	adc     L0779
000CC5r 1  8D rr rr     	sta     L0779
000CC8r 1  A9 00        	lda     #$00
000CCAr 1  8D rr rr     L0A13:	sta     _block_i
000CCDr 1  C9 04        	cmp     #$04
000CCFr 1  B0 51        	bcs     L07CC
000CD1r 1  A2 00        	ldx     #$00
000CD3r 1  AD rr rr     	lda     _block_i
000CD6r 1  0A           	asl     a
000CD7r 1  90 02        	bcc     L0A0A
000CD9r 1  E8           	inx
000CDAr 1  18           	clc
000CDBr 1  69 rr        L0A0A:	adc     #<(_tetramino)
000CDDr 1  A8           	tay
000CDEr 1  8A           	txa
000CDFr 1  69 rr        	adc     #>(_tetramino)
000CE1r 1  AA           	tax
000CE2r 1  98           	tya
000CE3r 1  85 rr        	sta     sreg
000CE5r 1  86 rr        	stx     sreg+1
000CE7r 1  85 rr        	sta     ptr1
000CE9r 1  86 rr        	stx     ptr1+1
000CEBr 1  A0 00        	ldy     #$00
000CEDr 1  A2 00        	ldx     #$00
000CEFr 1  B1 rr        	lda     (ptr1),y
000CF1r 1  38           	sec
000CF2r 1  ED rr rr     	sbc     L0779
000CF5r 1  91 rr        	sta     (sreg),y
000CF7r 1  AD rr rr     	lda     _block_i
000CFAr 1  0A           	asl     a
000CFBr 1  90 02        	bcc     L0A0B
000CFDr 1  E8           	inx
000CFEr 1  18           	clc
000CFFr 1  69 rr        L0A0B:	adc     #<(_tetramino)
000D01r 1  A8           	tay
000D02r 1  8A           	txa
000D03r 1  69 rr        	adc     #>(_tetramino)
000D05r 1  AA           	tax
000D06r 1  98           	tya
000D07r 1  85 rr        	sta     sreg
000D09r 1  86 rr        	stx     sreg+1
000D0Br 1  85 rr        	sta     ptr1
000D0Dr 1  86 rr        	stx     ptr1+1
000D0Fr 1  A0 01        	ldy     #$01
000D11r 1  B1 rr        	lda     (ptr1),y
000D13r 1  38           	sec
000D14r 1  ED rr rr     	sbc     L077A
000D17r 1  91 rr        	sta     (sreg),y
000D19r 1  AD rr rr     	lda     _block_i
000D1Cr 1  18           	clc
000D1Dr 1  69 01        	adc     #$01
000D1Fr 1  4C rr rr     	jmp     L0A13
000D22r 1  4C rr rr     L07CC:	jmp     incsp2
000D25r 1               
000D25r 1               .endproc
000D25r 1               
000D25r 1               ; ---------------------------------------------------------------
000D25r 1               ; void __near__ WaitForInput (void)
000D25r 1               ; ---------------------------------------------------------------
000D25r 1               
000D25r 1               .segment	"CODE"
000D25r 1               
000D25r 1               .proc	_WaitForInput: near
000D25r 1               
000D25r 1               .segment	"CODE"
000D25r 1               
000D25r 1  4C rr rr     	jmp     L04DB
000D28r 1  20 rr rr     L0A16:	jsr     _read_joy
000D2Br 1  8D rr rr     	sta     _joy
000D2Er 1  AD rr rr     	lda     _btn_frames
000D31r 1  18           	clc
000D32r 1  69 01        	adc     #$01
000D34r 1  8D rr rr     	sta     _btn_frames
000D37r 1  AD rr rr     L04DB:	lda     _joy
000D3Ar 1  F0 EC        	beq     L0A16
000D3Cr 1  60           	rts
000D3Dr 1               
000D3Dr 1               .endproc
000D3Dr 1               
000D3Dr 1               ; ---------------------------------------------------------------
000D3Dr 1               ; void __near__ FixPosition (void)
000D3Dr 1               ; ---------------------------------------------------------------
000D3Dr 1               
000D3Dr 1               .segment	"CODE"
000D3Dr 1               
000D3Dr 1               .proc	_FixPosition: near
000D3Dr 1               
000D3Dr 1               .segment	"CODE"
000D3Dr 1               
000D3Dr 1  A9 00        	lda     #$00
000D3Fr 1  8D rr rr     L0A32:	sta     _block_i
000D42r 1  C9 04        	cmp     #$04
000D44r 1  90 01        	bcc     L0A40
000D46r 1  60           	rts
000D47r 1  A2 00        L0A40:	ldx     #$00
000D49r 1  AD rr rr     	lda     _block_i
000D4Cr 1  0A           	asl     a
000D4Dr 1  90 02        	bcc     L0A26
000D4Fr 1  E8           	inx
000D50r 1  18           	clc
000D51r 1  69 rr        L0A26:	adc     #<(_tetramino)
000D53r 1  85 rr        	sta     ptr1
000D55r 1  8A           	txa
000D56r 1  69 rr        	adc     #>(_tetramino)
000D58r 1  85 rr        	sta     ptr1+1
000D5Ar 1  A0 01        	ldy     #$01
000D5Cr 1  4C rr rr     	jmp     L0A35
000D5Fr 1  AD rr rr     L0A2A:	lda     _block_x
000D62r 1  20 rr rr     	jsr     negax
000D65r 1  8D rr rr     	sta     _tetra_x
000D68r 1  A2 00        	ldx     #$00
000D6Ar 1  AD rr rr     	lda     _block_i
000D6Dr 1  0A           	asl     a
000D6Er 1  90 02        	bcc     L0A27
000D70r 1  E8           	inx
000D71r 1  18           	clc
000D72r 1  69 rr        L0A27:	adc     #<(_tetramino)
000D74r 1  85 rr        	sta     ptr1
000D76r 1  8A           	txa
000D77r 1  69 rr        	adc     #>(_tetramino)
000D79r 1  85 rr        	sta     ptr1+1
000D7Br 1  B1 rr        L0A35:	lda     (ptr1),y
000D7Dr 1  18           	clc
000D7Er 1  6D rr rr     	adc     _tetra_x
000D81r 1  8D rr rr     	sta     _block_x
000D84r 1  C9 F1        	cmp     #$F1
000D86r 1  A2 00        	ldx     #$00
000D88r 1  B0 D5        	bcs     L0A2A
000D8Ar 1  4C rr rr     	jmp     L0A2C
000D8Dr 1  AD rr rr     L0A2B:	lda     _tetra_x
000D90r 1  38           	sec
000D91r 1  E9 01        	sbc     #$01
000D93r 1  8D rr rr     	sta     _tetra_x
000D96r 1  A2 00        	ldx     #$00
000D98r 1  AD rr rr     	lda     _block_i
000D9Br 1  0A           	asl     a
000D9Cr 1  90 02        	bcc     L0A28
000D9Er 1  E8           	inx
000D9Fr 1  18           	clc
000DA0r 1  69 rr        L0A28:	adc     #<(_tetramino)
000DA2r 1  85 rr        	sta     ptr1
000DA4r 1  8A           	txa
000DA5r 1  69 rr        	adc     #>(_tetramino)
000DA7r 1  85 rr        	sta     ptr1+1
000DA9r 1  B1 rr        	lda     (ptr1),y
000DABr 1  18           	clc
000DACr 1  6D rr rr     	adc     _tetra_x
000DAFr 1  8D rr rr     	sta     _block_x
000DB2r 1  AD rr rr     L0A2C:	lda     _block_x
000DB5r 1  C9 0A        	cmp     #$0A
000DB7r 1  B0 D4        	bcs     L0A2B
000DB9r 1  A2 00        	ldx     #$00
000DBBr 1  4C rr rr     	jmp     L0A3F
000DBEr 1  AD rr rr     L0A2D:	lda     _tetra_y
000DC1r 1  38           	sec
000DC2r 1  E9 01        	sbc     #$01
000DC4r 1  8D rr rr     	sta     _tetra_y
000DC7r 1  AD rr rr     L0A3F:	lda     _block_i
000DCAr 1  0A           	asl     a
000DCBr 1  90 01        	bcc     L0A22
000DCDr 1  E8           	inx
000DCEr 1  85 rr        L0A22:	sta     ptr1
000DD0r 1  8A           	txa
000DD1r 1  18           	clc
000DD2r 1  69 rr        	adc     #>(_tetramino)
000DD4r 1  85 rr        	sta     ptr1+1
000DD6r 1  A0 rr        	ldy     #<(_tetramino)
000DD8r 1  B1 rr        	lda     (ptr1),y
000DDAr 1  18           	clc
000DDBr 1  6D rr rr     	adc     _tetra_y
000DDEr 1  8D rr rr     	sta     _block_y
000DE1r 1  C9 18        	cmp     #$18
000DE3r 1  A2 00        	ldx     #$00
000DE5r 1  B0 D7        	bcs     L0A2D
000DE7r 1  4C rr rr     	jmp     L0A2F
000DEAr 1  AD rr rr     L0A2E:	lda     _tetra_y
000DEDr 1  38           	sec
000DEEr 1  E9 01        	sbc     #$01
000DF0r 1  8D rr rr     	sta     _tetra_y
000DF3r 1  A2 00        	ldx     #$00
000DF5r 1  AD rr rr     	lda     _block_i
000DF8r 1  0A           	asl     a
000DF9r 1  90 01        	bcc     L0A23
000DFBr 1  E8           	inx
000DFCr 1  85 rr        L0A23:	sta     ptr1
000DFEr 1  8A           	txa
000DFFr 1  18           	clc
000E00r 1  69 rr        	adc     #>(_tetramino)
000E02r 1  85 rr        	sta     ptr1+1
000E04r 1  A0 rr        	ldy     #<(_tetramino)
000E06r 1  B1 rr        	lda     (ptr1),y
000E08r 1  18           	clc
000E09r 1  6D rr rr     	adc     _tetra_y
000E0Cr 1  8D rr rr     	sta     _block_y
000E0Fr 1  A2 00        	ldx     #$00
000E11r 1  AD rr rr     L0A2F:	lda     _block_y
000E14r 1  20 rr rr     	jsr     mulax10
000E17r 1  18           	clc
000E18r 1  69 rr        	adc     #<(_playfield)
000E1Ar 1  85 rr        	sta     ptr1
000E1Cr 1  8A           	txa
000E1Dr 1  69 rr        	adc     #>(_playfield)
000E1Fr 1  85 rr        	sta     ptr1+1
000E21r 1  AC rr rr     	ldy     _block_x
000E24r 1  B1 rr        	lda     (ptr1),y
000E26r 1  D0 C2        	bne     L0A2E
000E28r 1  AD rr rr     	lda     _block_i
000E2Br 1  18           	clc
000E2Cr 1  69 01        	adc     #$01
000E2Er 1  4C rr rr     	jmp     L0A32
000E31r 1               
000E31r 1               .endproc
000E31r 1               
000E31r 1               ; ---------------------------------------------------------------
000E31r 1               ; void __near__ FindLinesToClear (void)
000E31r 1               ; ---------------------------------------------------------------
000E31r 1               
000E31r 1               .segment	"CODE"
000E31r 1               
000E31r 1               .proc	_FindLinesToClear: near
000E31r 1               
000E31r 1               .segment	"CODE"
000E31r 1               
000E31r 1  A9 00        	lda     #$00
000E33r 1  8D rr rr     	sta     _lines_cleared
000E36r 1  A9 rr        	lda     #<(_playfield)
000E38r 1  8D rr rr     	sta     _ptr1
000E3Br 1  A9 rr        	lda     #>(_playfield)
000E3Dr 1  8D rr rr     	sta     _ptr1+1
000E40r 1  A9 00        	lda     #$00
000E42r 1  8D rr rr     L0A49:	sta     _block_y
000E45r 1  C9 18        	cmp     #$18
000E47r 1  B0 77        	bcs     L081A
000E49r 1  A9 01        	lda     #$01
000E4Br 1  8D rr rr     	sta     _i
000E4Er 1  A2 00        	ldx     #$00
000E50r 1  8A           	txa
000E51r 1  4C rr rr     	jmp     L0A48
000E54r 1  AD rr rr     L0825:	lda     _ptr1
000E57r 1  85 rr        	sta     ptr1
000E59r 1  AD rr rr     	lda     _ptr1+1
000E5Cr 1  85 rr        	sta     ptr1+1
000E5Er 1  A1 rr        	lda     (ptr1,x)
000E60r 1  8D rr rr     	sta     _i
000E63r 1  AD rr rr     	lda     _ptr1
000E66r 1  AE rr rr     	ldx     _ptr1+1
000E69r 1  18           	clc
000E6Ar 1  69 01        	adc     #$01
000E6Cr 1  90 01        	bcc     L0830
000E6Er 1  E8           	inx
000E6Fr 1  8D rr rr     L0830:	sta     _ptr1
000E72r 1  8E rr rr     	stx     _ptr1+1
000E75r 1  A2 00        	ldx     #$00
000E77r 1  AD rr rr     	lda     _block_x
000E7Ar 1  18           	clc
000E7Br 1  69 01        	adc     #$01
000E7Dr 1  8D rr rr     L0A48:	sta     _block_x
000E80r 1  AD rr rr     	lda     _i
000E83r 1  F0 07        	beq     L0A46
000E85r 1  AD rr rr     	lda     _block_x
000E88r 1  C9 0A        	cmp     #$0A
000E8Ar 1  90 C8        	bcc     L0825
000E8Cr 1  A9 0A        L0A46:	lda     #$0A
000E8Er 1  38           	sec
000E8Fr 1  ED rr rr     	sbc     _block_x
000E92r 1  18           	clc
000E93r 1  6D rr rr     	adc     _ptr1
000E96r 1  8D rr rr     	sta     _ptr1
000E99r 1  8A           	txa
000E9Ar 1  6D rr rr     	adc     _ptr1+1
000E9Dr 1  8D rr rr     	sta     _ptr1+1
000EA0r 1  AC rr rr     	ldy     _block_y
000EA3r 1  AD rr rr     	lda     _i
000EA6r 1  99 rr rr     	sta     _lines_to_clear,y
000EA9r 1  AD rr rr     	lda     _i
000EACr 1  F0 09        	beq     L0A47
000EAEr 1  AD rr rr     	lda     _lines_cleared
000EB1r 1  18           	clc
000EB2r 1  69 01        	adc     #$01
000EB4r 1  8D rr rr     	sta     _lines_cleared
000EB7r 1  AD rr rr     L0A47:	lda     _block_y
000EBAr 1  18           	clc
000EBBr 1  69 01        	adc     #$01
000EBDr 1  4C rr rr     	jmp     L0A49
000EC0r 1  60           L081A:	rts
000EC1r 1               
000EC1r 1               .endproc
000EC1r 1               
000EC1r 1               ; ---------------------------------------------------------------
000EC1r 1               ; void __near__ ClearMarkedLinesInPlayfield (void)
000EC1r 1               ; ---------------------------------------------------------------
000EC1r 1               
000EC1r 1               .segment	"CODE"
000EC1r 1               
000EC1r 1               .proc	_ClearMarkedLinesInPlayfield: near
000EC1r 1               
000EC1r 1               .segment	"CODE"
000EC1r 1               
000EC1r 1  A9 18        	lda     #$18
000EC3r 1  8D rr rr     	sta     _block_y
000EC6r 1  A2 00        	ldx     #$00
000EC8r 1  AD rr rr     	lda     _block_y
000ECBr 1  8D rr rr     	sta     _block_x
000ECEr 1  4C rr rr     	jmp     L0865
000ED1r 1  AD rr rr     L0A4C:	lda     _block_x
000ED4r 1  38           	sec
000ED5r 1  E9 01        	sbc     #$01
000ED7r 1  B0 01        	bcs     L086A
000ED9r 1  CA           	dex
000EDAr 1  85 rr        L086A:	sta     ptr1
000EDCr 1  8A           	txa
000EDDr 1  18           	clc
000EDEr 1  69 rr        	adc     #>(_lines_to_clear)
000EE0r 1  85 rr        	sta     ptr1+1
000EE2r 1  A0 rr        	ldy     #<(_lines_to_clear)
000EE4r 1  B1 rr        	lda     (ptr1),y
000EE6r 1  F0 0F        	beq     L0A4D
000EE8r 1  A2 00        	ldx     #$00
000EEAr 1  AD rr rr     	lda     _block_x
000EEDr 1  48           	pha
000EEEr 1  38           	sec
000EEFr 1  E9 01        	sbc     #$01
000EF1r 1  8D rr rr     	sta     _block_x
000EF4r 1  4C rr rr     	jmp     L0A4B
000EF7r 1  AD rr rr     L0A4D:	lda     _block_y
000EFAr 1  CD rr rr     	cmp     _block_x
000EFDr 1  D0 03 4C rr  	jeq     L0A4F
000F01r 1  rr           
000F02r 1  A2 00        	ldx     #$00
000F04r 1  AD rr rr     	lda     _block_y
000F07r 1  38           	sec
000F08r 1  E9 01        	sbc     #$01
000F0Ar 1  B0 01        	bcs     L0872
000F0Cr 1  CA           	dex
000F0Dr 1  20 rr rr     L0872:	jsr     mulax10
000F10r 1  18           	clc
000F11r 1  69 rr        	adc     #<(_playfield)
000F13r 1  8D rr rr     	sta     _ptr1
000F16r 1  8A           	txa
000F17r 1  69 rr        	adc     #>(_playfield)
000F19r 1  8D rr rr     	sta     _ptr1+1
000F1Cr 1  A2 00        	ldx     #$00
000F1Er 1  AD rr rr     	lda     _block_x
000F21r 1  38           	sec
000F22r 1  E9 01        	sbc     #$01
000F24r 1  B0 01        	bcs     L0876
000F26r 1  CA           	dex
000F27r 1  20 rr rr     L0876:	jsr     mulax10
000F2Ar 1  18           	clc
000F2Br 1  69 rr        	adc     #<(_playfield)
000F2Dr 1  8D rr rr     	sta     _ptr2
000F30r 1  8A           	txa
000F31r 1  69 rr        	adc     #>(_playfield)
000F33r 1  8D rr rr     	sta     _ptr2+1
000F36r 1  A9 00        	lda     #$00
000F38r 1  8D rr rr     L0A50:	sta     _i
000F3Br 1  C9 0A        	cmp     #$0A
000F3Dr 1  B0 47        	bcs     L0A4F
000F3Fr 1  AD rr rr     	lda     _ptr1
000F42r 1  AE rr rr     	ldx     _ptr1+1
000F45r 1  20 rr rr     	jsr     pushax
000F48r 1  AD rr rr     	lda     _ptr2
000F4Br 1  85 rr        	sta     ptr1
000F4Dr 1  AD rr rr     	lda     _ptr2+1
000F50r 1  85 rr        	sta     ptr1+1
000F52r 1  A0 00        	ldy     #$00
000F54r 1  B1 rr        	lda     (ptr1),y
000F56r 1  20 rr rr     	jsr     staspidx
000F59r 1  AD rr rr     	lda     _ptr1
000F5Cr 1  AE rr rr     	ldx     _ptr1+1
000F5Fr 1  18           	clc
000F60r 1  69 01        	adc     #$01
000F62r 1  90 01        	bcc     L0882
000F64r 1  E8           	inx
000F65r 1  8D rr rr     L0882:	sta     _ptr1
000F68r 1  8E rr rr     	stx     _ptr1+1
000F6Br 1  AD rr rr     	lda     _ptr2
000F6Er 1  AE rr rr     	ldx     _ptr2+1
000F71r 1  18           	clc
000F72r 1  69 01        	adc     #$01
000F74r 1  90 01        	bcc     L0884
000F76r 1  E8           	inx
000F77r 1  8D rr rr     L0884:	sta     _ptr2
000F7Ar 1  8E rr rr     	stx     _ptr2+1
000F7Dr 1  AD rr rr     	lda     _i
000F80r 1  18           	clc
000F81r 1  69 01        	adc     #$01
000F83r 1  4C rr rr     	jmp     L0A50
000F86r 1  AD rr rr     L0A4F:	lda     _block_x
000F89r 1  38           	sec
000F8Ar 1  E9 01        	sbc     #$01
000F8Cr 1  8D rr rr     	sta     _block_x
000F8Fr 1  A2 00        	ldx     #$00
000F91r 1  AD rr rr     	lda     _block_y
000F94r 1  48           	pha
000F95r 1  38           	sec
000F96r 1  E9 01        	sbc     #$01
000F98r 1  8D rr rr     	sta     _block_y
000F9Br 1  68           L0A4B:	pla
000F9Cr 1  AD rr rr     L0865:	lda     _block_x
000F9Fr 1  F0 03 4C rr  	jne     L0A4C
000FA3r 1  rr           
000FA4r 1  60           	rts
000FA5r 1               
000FA5r 1               .endproc
000FA5r 1               
000FA5r 1               ; ---------------------------------------------------------------
000FA5r 1               ; void __near__ AnimateLinesToClear (unsigned char)
000FA5r 1               ; ---------------------------------------------------------------
000FA5r 1               
000FA5r 1               .segment	"CODE"
000FA5r 1               
000FA5r 1               .proc	_AnimateLinesToClear: near
000FA5r 1               
000FA5r 1               .segment	"BSS"
000151r 1               
000151r 1               L083C:
000151r 1  00 00        	.res	2,$00
000153r 1               
000153r 1               .segment	"CODE"
000FA5r 1               
000FA5r 1  A9 00        	lda     #$00
000FA7r 1  8D rr rr     L0A54:	sta     _block_y
000FAAr 1  C9 18        	cmp     #$18
000FACr 1  B0 7B        	bcs     L083E
000FAEr 1  AC rr rr     	ldy     _block_y
000FB1r 1  B9 rr rr     	lda     _lines_to_clear,y
000FB4r 1  F0 6A        	beq     L0A53
000FB6r 1  A2 00        	ldx     #$00
000FB8r 1  AD rr rr     	lda     _block_y
000FBBr 1  20 rr rr     	jsr     shlax4
000FBEr 1  86 rr        	stx     tmp1
000FC0r 1  0A           	asl     a
000FC1r 1  26 rr        	rol     tmp1
000FC3r 1  48           	pha
000FC4r 1  A5 rr        	lda     tmp1
000FC6r 1  18           	clc
000FC7r 1  69 20        	adc     #$20
000FC9r 1  AA           	tax
000FCAr 1  68           	pla
000FCBr 1  18           	clc
000FCCr 1  69 07        	adc     #$07
000FCEr 1  90 02        	bcc     L0A51
000FD0r 1  E8           	inx
000FD1r 1  18           	clc
000FD2r 1  69 01        L0A51:	adc     #$01
000FD4r 1  90 01        	bcc     L084D
000FD6r 1  E8           	inx
000FD7r 1  8D rr rr     L084D:	sta     L083C
000FDAr 1  8E rr rr     	stx     L083C+1
000FDDr 1  20 rr rr     	jsr     decsp6
000FE0r 1  A9 0A        	lda     #$0A
000FE2r 1  A0 04        	ldy     #$04
000FE4r 1  91 rr        	sta     (sp),y
000FE6r 1  C8           	iny
000FE7r 1  A9 00        	lda     #$00
000FE9r 1  91 rr        	sta     (sp),y
000FEBr 1  AD rr rr     	lda     L083C
000FEEr 1  A0 02        	ldy     #$02
000FF0r 1  91 rr        	sta     (sp),y
000FF2r 1  C8           	iny
000FF3r 1  AD rr rr     	lda     L083C+1
000FF6r 1  91 rr        	sta     (sp),y
000FF8r 1  A0 06        	ldy     #$06
000FFAr 1  A2 00        	ldx     #$00
000FFCr 1  B1 rr        	lda     (sp),y
000FFEr 1  20 rr rr     	jsr     mulax10
001001r 1  18           	clc
001002r 1  69 rr        	adc     #<(_line_clear_graphic)
001004r 1  A8           	tay
001005r 1  8A           	txa
001006r 1  69 rr        	adc     #>(_line_clear_graphic)
001008r 1  AA           	tax
001009r 1  98           	tya
00100Ar 1  A0 00        	ldy     #$00
00100Cr 1  91 rr        	sta     (sp),y
00100Er 1  C8           	iny
00100Fr 1  8A           	txa
001010r 1  91 rr        	sta     (sp),y
001012r 1  20 rr rr     	jsr     _ppu_write
001015r 1  A9 00        	lda     #$00
001017r 1  8D 06 20     	sta     $2006
00101Ar 1  8D 06 20     	sta     $2006
00101Dr 1  20 rr rr     	jsr     _wait_vblank
001020r 1  AD rr rr     L0A53:	lda     _block_y
001023r 1  18           	clc
001024r 1  69 01        	adc     #$01
001026r 1  4C rr rr     	jmp     L0A54
001029r 1  4C rr rr     L083E:	jmp     incsp1
00102Cr 1               
00102Cr 1               .endproc
00102Cr 1               
00102Cr 1               ; ---------------------------------------------------------------
00102Cr 1               ; void __near__ UpdateScore (void)
00102Cr 1               ; ---------------------------------------------------------------
00102Cr 1               
00102Cr 1               .segment	"CODE"
00102Cr 1               
00102Cr 1               .proc	_UpdateScore: near
00102Cr 1               
00102Cr 1               .segment	"CODE"
00102Cr 1               
00102Cr 1  A9 30        	lda     #$30
00102Er 1  8D rr rr     	sta     _digit_chars_score+4
001031r 1  8D rr rr     	sta     _digit_chars_score+5
001034r 1  20 rr rr     	jsr     decsp5
001037r 1  AD rr rr     	lda     _score
00103Ar 1  A0 03        	ldy     #$03
00103Cr 1  91 rr        	sta     (sp),y
00103Er 1  C8           	iny
00103Fr 1  AD rr rr     	lda     _score+1
001042r 1  91 rr        	sta     (sp),y
001044r 1  A9 rr        	lda     #<(_digit_chars_score)
001046r 1  A0 01        	ldy     #$01
001048r 1  91 rr        	sta     (sp),y
00104Ar 1  C8           	iny
00104Br 1  A9 rr        	lda     #>(_digit_chars_score)
00104Dr 1  91 rr        	sta     (sp),y
00104Fr 1  A9 04        	lda     #$04
001051r 1  A0 00        	ldy     #$00
001053r 1  91 rr        	sta     (sp),y
001055r 1  4C rr rr     	jmp     _IntToStr
001058r 1               
001058r 1               .endproc
001058r 1               
001058r 1               ; ---------------------------------------------------------------
001058r 1               ; void __near__ UpdateLevel (void)
001058r 1               ; ---------------------------------------------------------------
001058r 1               
001058r 1               .segment	"CODE"
001058r 1               
001058r 1               .proc	_UpdateLevel: near
001058r 1               
001058r 1               .segment	"CODE"
001058r 1               
001058r 1  20 rr rr     	jsr     decsp5
00105Br 1  AD rr rr     	lda     _level
00105Er 1  A0 03        	ldy     #$03
001060r 1  91 rr        	sta     (sp),y
001062r 1  C8           	iny
001063r 1  A9 00        	lda     #$00
001065r 1  91 rr        	sta     (sp),y
001067r 1  A9 rr        	lda     #<(_digit_chars_level)
001069r 1  A0 01        	ldy     #$01
00106Br 1  91 rr        	sta     (sp),y
00106Dr 1  C8           	iny
00106Er 1  A9 rr        	lda     #>(_digit_chars_level)
001070r 1  91 rr        	sta     (sp),y
001072r 1  98           	tya
001073r 1  A0 00        	ldy     #$00
001075r 1  91 rr        	sta     (sp),y
001077r 1  4C rr rr     	jmp     _IntToStr
00107Ar 1               
00107Ar 1               .endproc
00107Ar 1               
00107Ar 1               ; ---------------------------------------------------------------
00107Ar 1               ; void __near__ DrawScore (void)
00107Ar 1               ; ---------------------------------------------------------------
00107Ar 1               
00107Ar 1               .segment	"CODE"
00107Ar 1               
00107Ar 1               .proc	_DrawScore: near
00107Ar 1               
00107Ar 1               .segment	"CODE"
00107Ar 1               
00107Ar 1  20 rr rr     	jsr     decsp6
00107Dr 1  A9 06        	lda     #$06
00107Fr 1  A0 04        	ldy     #$04
001081r 1  91 rr        	sta     (sp),y
001083r 1  C8           	iny
001084r 1  A9 00        	lda     #$00
001086r 1  91 rr        	sta     (sp),y
001088r 1  A9 F7        	lda     #$F7
00108Ar 1  A0 02        	ldy     #$02
00108Cr 1  91 rr        	sta     (sp),y
00108Er 1  C8           	iny
00108Fr 1  A9 22        	lda     #$22
001091r 1  91 rr        	sta     (sp),y
001093r 1  A9 rr        	lda     #<(_digit_chars_score)
001095r 1  A0 00        	ldy     #$00
001097r 1  91 rr        	sta     (sp),y
001099r 1  C8           	iny
00109Ar 1  A9 rr        	lda     #>(_digit_chars_score)
00109Cr 1  91 rr        	sta     (sp),y
00109Er 1  4C rr rr     	jmp     _ppu_write
0010A1r 1               
0010A1r 1               .endproc
0010A1r 1               
0010A1r 1               ; ---------------------------------------------------------------
0010A1r 1               ; void __near__ DrawLevel (void)
0010A1r 1               ; ---------------------------------------------------------------
0010A1r 1               
0010A1r 1               .segment	"CODE"
0010A1r 1               
0010A1r 1               .proc	_DrawLevel: near
0010A1r 1               
0010A1r 1               .segment	"CODE"
0010A1r 1               
0010A1r 1  20 rr rr     	jsr     decsp6
0010A4r 1  A9 02        	lda     #$02
0010A6r 1  A0 04        	ldy     #$04
0010A8r 1  91 rr        	sta     (sp),y
0010AAr 1  C8           	iny
0010ABr 1  A9 00        	lda     #$00
0010ADr 1  91 rr        	sta     (sp),y
0010AFr 1  A9 79        	lda     #$79
0010B1r 1  A0 02        	ldy     #$02
0010B3r 1  91 rr        	sta     (sp),y
0010B5r 1  C8           	iny
0010B6r 1  A9 22        	lda     #$22
0010B8r 1  91 rr        	sta     (sp),y
0010BAr 1  A9 rr        	lda     #<(_digit_chars_level)
0010BCr 1  A0 00        	ldy     #$00
0010BEr 1  91 rr        	sta     (sp),y
0010C0r 1  C8           	iny
0010C1r 1  A9 rr        	lda     #>(_digit_chars_level)
0010C3r 1  91 rr        	sta     (sp),y
0010C5r 1  4C rr rr     	jmp     _ppu_write
0010C8r 1               
0010C8r 1               .endproc
0010C8r 1               
0010C8r 1               ; ---------------------------------------------------------------
0010C8r 1               ; unsigned char __near__ GetScoreAddition (void)
0010C8r 1               ; ---------------------------------------------------------------
0010C8r 1               
0010C8r 1               .segment	"CODE"
0010C8r 1               
0010C8r 1               .proc	_GetScoreAddition: near
0010C8r 1               
0010C8r 1               .segment	"CODE"
0010C8r 1               
0010C8r 1  A2 00        	ldx     #$00
0010CAr 1  AD rr rr     	lda     _lines_cleared
0010CDr 1  C9 01        	cmp     #$01
0010CFr 1  F0 0D        	beq     L0A56
0010D1r 1  C9 02        	cmp     #$02
0010D3r 1  F0 0A        	beq     L0A58
0010D5r 1  C9 03        	cmp     #$03
0010D7r 1  F0 07        	beq     L0A59
0010D9r 1  C9 04        	cmp     #$04
0010DBr 1  F0 06        	beq     L0A5A
0010DDr 1  60           	rts
0010DEr 1  60           L0A56:	rts
0010DFr 1  60           L0A58:	rts
0010E0r 1  A9 04        L0A59:	lda     #$04
0010E2r 1  60           	rts
0010E3r 1  AD rr rr     L0A5A:	lda     _prev_lines_cleared
0010E6r 1  C9 04        	cmp     #$04
0010E8r 1  D0 03        	bne     L0A5B
0010EAr 1  A9 0C        	lda     #$0C
0010ECr 1  60           	rts
0010EDr 1  A9 08        L0A5B:	lda     #$08
0010EFr 1  60           	rts
0010F0r 1               
0010F0r 1               .endproc
0010F0r 1               
0010F0r 1               ; ---------------------------------------------------------------
0010F0r 1               ; void __near__ UpdateLevelParams (void)
0010F0r 1               ; ---------------------------------------------------------------
0010F0r 1               
0010F0r 1               .segment	"CODE"
0010F0r 1               
0010F0r 1               .proc	_UpdateLevelParams: near
0010F0r 1               
0010F0r 1               .segment	"CODE"
0010F0r 1               
0010F0r 1  AD rr rr     	lda     _level
0010F3r 1  C9 15        	cmp     #$15
0010F5r 1  B0 1A        	bcs     L0A5E
0010F7r 1  A2 00        	ldx     #$00
0010F9r 1  AD rr rr     	lda     _level
0010FCr 1  38           	sec
0010FDr 1  E9 01        	sbc     #$01
0010FFr 1  B0 01        	bcs     L08E3
001101r 1  CA           	dex
001102r 1  85 rr        L08E3:	sta     ptr1
001104r 1  8A           	txa
001105r 1  18           	clc
001106r 1  69 rr        	adc     #>(_level_speeds)
001108r 1  85 rr        	sta     ptr1+1
00110Ar 1  A0 rr        	ldy     #<(_level_speeds)
00110Cr 1  B1 rr        	lda     (ptr1),y
00110Er 1  4C rr rr     	jmp     L0A5C
001111r 1  AD rr rr     L0A5E:	lda     _level_speeds+19
001114r 1  8D rr rr     L0A5C:	sta     _movedelay
001117r 1  AD rr rr     	lda     _level
00111Ar 1  C9 0A        	cmp     #$0A
00111Cr 1  B0 05        	bcs     L0A5F
00111Er 1  A9 0A        	lda     #$0A
001120r 1  4C rr rr     	jmp     L0A61
001123r 1  A9 07        L0A5F:	lda     #$07
001125r 1  8D rr rr     L0A61:	sta     _joy_thresh_slow
001128r 1  A9 03        	lda     #$03
00112Ar 1  8D rr rr     	sta     _joy_thresh_fast
00112Dr 1  60           	rts
00112Er 1               
00112Er 1               .endproc
00112Er 1               
00112Er 1               ; ---------------------------------------------------------------
00112Er 1               ; void __near__ PlayFixSound (void)
00112Er 1               ; ---------------------------------------------------------------
00112Er 1               
00112Er 1               .segment	"CODE"
00112Er 1               
00112Er 1               .proc	_PlayFixSound: near
00112Er 1               
00112Er 1               .segment	"CODE"
00112Er 1               
00112Er 1  A9 87        	lda     #$87
001130r 1  8D 08 40     	sta     $4008
001133r 1  A9 A5        	lda     #$A5
001135r 1  8D 0A 40     	sta     $400A
001138r 1  A9 3F        	lda     #$3F
00113Ar 1  8D 0B 40     	sta     $400B
00113Dr 1  A9 0C        	lda     #$0C
00113Fr 1  8D 15 40     	sta     $4015
001142r 1  A9 10        	lda     #$10
001144r 1  8D rr rr     L0A65:	sta     _i
001147r 1  AD rr rr     	lda     _i
00114Ar 1  F0 17        	beq     L0A64
00114Cr 1  AD rr rr     	lda     _i
00114Fr 1  8D 0B 40     	sta     $400B
001152r 1  A9 02        	lda     #$02
001154r 1  20 rr rr     	jsr     pusha0
001157r 1  20 rr rr     	jsr     _delay
00115Ar 1  AD rr rr     	lda     _i
00115Dr 1  38           	sec
00115Er 1  E9 01        	sbc     #$01
001160r 1  4C rr rr     	jmp     L0A65
001163r 1  8D 15 40     L0A64:	sta     $4015
001166r 1  60           	rts
001167r 1               
001167r 1               .endproc
001167r 1               
001167r 1               ; ---------------------------------------------------------------
001167r 1               ; void __near__ WaitUnpause (void)
001167r 1               ; ---------------------------------------------------------------
001167r 1               
001167r 1               .segment	"CODE"
001167r 1               
001167r 1               .proc	_WaitUnpause: near
001167r 1               
001167r 1               .segment	"CODE"
001167r 1               
001167r 1  AD rr rr     L0A66:	lda     _joy
00116Ar 1  8D rr rr     	sta     _prev_joy
00116Dr 1  A9 00        	lda     #$00
00116Fr 1  20 rr rr     	jsr     _read_joy
001172r 1  8D rr rr     	sta     _joy
001175r 1  29 08        	and     #$08
001177r 1  F0 EE        	beq     L0A66
001179r 1  AD rr rr     	lda     _prev_joy
00117Cr 1  29 08        	and     #$08
00117Er 1  D0 E7        	bne     L0A66
001180r 1  8D rr rr     	sta     _paused
001183r 1  AD rr rr     	lda     _joy_block
001186r 1  09 08        	ora     #$08
001188r 1  8D rr rr     	sta     _joy_block
00118Br 1  60           	rts
00118Cr 1               
00118Cr 1               .endproc
00118Cr 1               
00118Cr 1               ; ---------------------------------------------------------------
00118Cr 1               ; int __near__ main (void)
00118Cr 1               ; ---------------------------------------------------------------
00118Cr 1               
00118Cr 1               .segment	"CODE"
00118Cr 1               
00118Cr 1               .proc	_main: near
00118Cr 1               
00118Cr 1               .segment	"CODE"
00118Cr 1               
00118Cr 1  A9 80        	lda     #$80
00118Er 1  8D 00 20     	sta     $2000
001191r 1  A9 06        	lda     #$06
001193r 1  8D 01 20     	sta     $2001
001196r 1  A9 0A        	lda     #$0A
001198r 1  8D rr rr     	sta     _joy_thresh
00119Br 1  20 rr rr     	jsr     _SetDefaultGamePalette
00119Er 1  A9 rr        	lda     #<(_nt_title_screen_rlec)
0011A0r 1  A2 rr        	ldx     #>(_nt_title_screen_rlec)
0011A2r 1  20 rr rr     	jsr     pushax
0011A5r 1  20 rr rr     	jsr     _DrawScreen
0011A8r 1  A9 80        	lda     #$80
0011AAr 1  8D 00 20     	sta     $2000
0011ADr 1  A9 1E        	lda     #$1E
0011AFr 1  8D 01 20     	sta     $2001
0011B2r 1  20 rr rr     	jsr     _WaitForInput
0011B5r 1  A9 80        L0301:	lda     #$80
0011B7r 1  8D 00 20     	sta     $2000
0011BAr 1  A9 06        	lda     #$06
0011BCr 1  8D 01 20     	sta     $2001
0011BFr 1  A9 00        	lda     #$00
0011C1r 1  8D rr rr     	sta     _tetra_i
0011C4r 1  8D rr rr     	sta     _paused
0011C7r 1  8D rr rr     	sta     _playfield_changed
0011CAr 1  8D rr rr     	sta     _total_lines_cleared
0011CDr 1  8D rr rr     	sta     _gameover
0011D0r 1  A9 07        	lda     #$07
0011D2r 1  8D rr rr     	sta     _tetra_hold
0011D5r 1  20 rr rr     	jsr     pusha
0011D8r 1  20 rr rr     	jsr     _RenderTetraminoMask
0011DBr 1  A9 00        	lda     #$00
0011DDr 1  20 rr rr     	jsr     pusha
0011E0r 1  20 rr rr     	jsr     _UpdateHoldSprite
0011E3r 1  20 rr rr     	jsr     _RandomizeNextTetraminos
0011E6r 1  20 rr rr     	jsr     _SetDefaultGamePalette
0011E9r 1  A9 rr        	lda     #<(_nt_game_screen_rlec)
0011EBr 1  A2 rr        	ldx     #>(_nt_game_screen_rlec)
0011EDr 1  20 rr rr     	jsr     pushax
0011F0r 1  20 rr rr     	jsr     _DrawScreen
0011F3r 1  A9 00        	lda     #$00
0011F5r 1  20 rr rr     	jsr     pusha
0011F8r 1  20 rr rr     	jsr     _CreateNewTetramino
0011FBr 1  A9 00        	lda     #$00
0011FDr 1  8D rr rr     	sta     _joy_block
001200r 1  8D rr rr     	sta     _score
001203r 1  8D rr rr     	sta     _score+1
001206r 1  A9 01        	lda     #$01
001208r 1  8D rr rr     	sta     _level
00120Br 1  20 rr rr     	jsr     _UpdateLevelParams
00120Er 1  20 rr rr     	jsr     _UpdateScore
001211r 1  20 rr rr     	jsr     _UpdateLevel
001214r 1  A9 00        	lda     #$00
001216r 1  8D rr rr     	sta     _prev_lines_cleared
001219r 1  20 rr rr     	jsr     _wait_vblank
00121Cr 1  20 rr rr     	jsr     _DrawScore
00121Fr 1  20 rr rr     	jsr     _DrawLevel
001222r 1  A9 00        	lda     #$00
001224r 1  8D 06 20     	sta     $2006
001227r 1  8D 06 20     	sta     $2006
00122Ar 1  20 rr rr     	jsr     _wait_vblank
00122Dr 1  A9 80        	lda     #$80
00122Fr 1  8D 00 20     	sta     $2000
001232r 1  A9 1E        	lda     #$1E
001234r 1  8D 01 20     	sta     $2001
001237r 1  20 rr rr     L0340:	jsr     _UpdateFrame
00123Ar 1  AD rr rr     	lda     _gameover
00123Dr 1  F0 15        	beq     L0342
00123Fr 1  A9 06        	lda     #$06
001241r 1  8D 01 20     	sta     $2001
001244r 1  A9 rr        	lda     #<(_playfield)
001246r 1  A2 rr        	ldx     #>(_playfield)
001248r 1  20 rr rr     	jsr     pushax
00124Br 1  20 rr rr     	jsr     _clear_playfield
00124Er 1  20 rr rr     	jsr     _clear_nt0
001251r 1  4C rr rr     	jmp     L0301
001254r 1  AD rr rr     L0342:	lda     _paused
001257r 1  F0 4D        	beq     L0366
001259r 1  20 rr rr     	jsr     _wait_vblank
00125Cr 1  20 rr rr     	jsr     decsp6
00125Fr 1  A9 06        	lda     #$06
001261r 1  A0 04        	ldy     #$04
001263r 1  91 rr        	sta     (sp),y
001265r 1  C8           	iny
001266r 1  A9 00        	lda     #$00
001268r 1  91 rr        	sta     (sp),y
00126Ar 1  A9 4A        	lda     #$4A
00126Cr 1  A0 02        	ldy     #$02
00126Er 1  91 rr        	sta     (sp),y
001270r 1  C8           	iny
001271r 1  A9 21        	lda     #$21
001273r 1  91 rr        	sta     (sp),y
001275r 1  A9 rr        	lda     #<(_paused_text)
001277r 1  A0 00        	ldy     #$00
001279r 1  91 rr        	sta     (sp),y
00127Br 1  C8           	iny
00127Cr 1  A9 rr        	lda     #>(_paused_text)
00127Er 1  91 rr        	sta     (sp),y
001280r 1  20 rr rr     	jsr     _ppu_write
001283r 1  A9 00        	lda     #$00
001285r 1  8D 06 20     	sta     $2006
001288r 1  8D 06 20     	sta     $2006
00128Br 1  20 rr rr     	jsr     _wait_vblank
00128Er 1  20 rr rr     	jsr     _WaitUnpause
001291r 1  20 rr rr     	jsr     _wait_vblank
001294r 1  A9 rr        	lda     #<(_playfield+40)
001296r 1  A2 rr        	ldx     #>(_playfield+40)
001298r 1  20 rr rr     	jsr     pushax
00129Br 1  20 rr rr     	jsr     _blit_playfield
00129Er 1  A9 00        	lda     #$00
0012A0r 1  8D 06 20     	sta     $2006
0012A3r 1  8D 06 20     	sta     $2006
0012A6r 1  20 rr rr     L0366:	jsr     _wait_vblank
0012A9r 1  A9 00        	lda     #$00
0012ABr 1  8D 03 20     	sta     $2003
0012AEr 1  A9 02        	lda     #$02
0012B0r 1  8D 14 40     	sta     $4014
0012B3r 1  AD rr rr     	lda     _playfield_changed
0012B6r 1  D0 03 4C rr  	jeq     L03B2
0012BAr 1  rr           
0012BBr 1  20 rr rr     	jsr     decsp6
0012BEr 1  A9 03        	lda     #$03
0012C0r 1  A0 04        	ldy     #$04
0012C2r 1  91 rr        	sta     (sp),y
0012C4r 1  C8           	iny
0012C5r 1  A9 00        	lda     #$00
0012C7r 1  91 rr        	sta     (sp),y
0012C9r 1  A9 11        	lda     #$11
0012CBr 1  A0 02        	ldy     #$02
0012CDr 1  91 rr        	sta     (sp),y
0012CFr 1  C8           	iny
0012D0r 1  A9 3F        	lda     #$3F
0012D2r 1  91 rr        	sta     (sp),y
0012D4r 1  A9 rr        	lda     #<(_tetramino_colors+21)
0012D6r 1  A0 00        	ldy     #$00
0012D8r 1  91 rr        	sta     (sp),y
0012DAr 1  C8           	iny
0012DBr 1  A9 rr        	lda     #>(_tetramino_colors+21)
0012DDr 1  91 rr        	sta     (sp),y
0012DFr 1  20 rr rr     	jsr     _ppu_write
0012E2r 1  A9 00        	lda     #$00
0012E4r 1  8D 06 20     	sta     $2006
0012E7r 1  8D 06 20     	sta     $2006
0012EAr 1  20 rr rr     	jsr     _wait_vblank
0012EDr 1  20 rr rr     	jsr     _ClearTetraSprite
0012F0r 1  20 rr rr     	jsr     decsp4
0012F3r 1  A9 rr        	lda     #<(_tetramino)
0012F5r 1  A0 02        	ldy     #$02
0012F7r 1  91 rr        	sta     (sp),y
0012F9r 1  C8           	iny
0012FAr 1  A9 rr        	lda     #>(_tetramino)
0012FCr 1  91 rr        	sta     (sp),y
0012FEr 1  AD rr rr     	lda     _tetra_x
001301r 1  A0 01        	ldy     #$01
001303r 1  91 rr        	sta     (sp),y
001305r 1  AD rr rr     	lda     _tetra_y
001308r 1  88           	dey
001309r 1  91 rr        	sta     (sp),y
00130Br 1  20 rr rr     	jsr     _draw_tetramino_at_playfield
00130Er 1  A9 00        	lda     #$00
001310r 1  8D 06 20     	sta     $2006
001313r 1  8D 06 20     	sta     $2006
001316r 1  20 rr rr     	jsr     _PlayFixSound
001319r 1  20 rr rr     	jsr     _wait_vblank
00131Cr 1  A9 00        	lda     #$00
00131Er 1  8D 03 20     	sta     $2003
001321r 1  A9 02        	lda     #$02
001323r 1  8D 14 40     	sta     $4014
001326r 1  20 rr rr     	jsr     _wait_vblank
001329r 1  AD rr rr     	lda     _lines_cleared
00132Cr 1  F0 65        	beq     L03B2
00132Er 1  A9 00        	lda     #$00
001330r 1  8D rr rr     L0A6B:	sta     _block_x
001333r 1  C9 05        	cmp     #$05
001335r 1  B0 41        	bcs     L03B5
001337r 1  20 rr rr     	jsr     _wait_vblank
00133Ar 1  20 rr rr     	jsr     decsp4
00133Dr 1  A2 00        	ldx     #$00
00133Fr 1  AD rr rr     	lda     _block_x
001342r 1  20 rr rr     	jsr     mulax10
001345r 1  18           	clc
001346r 1  69 rr        	adc     #<(_line_clear_graphic)
001348r 1  A8           	tay
001349r 1  8A           	txa
00134Ar 1  69 rr        	adc     #>(_line_clear_graphic)
00134Cr 1  AA           	tax
00134Dr 1  98           	tya
00134Er 1  A0 02        	ldy     #$02
001350r 1  91 rr        	sta     (sp),y
001352r 1  C8           	iny
001353r 1  8A           	txa
001354r 1  91 rr        	sta     (sp),y
001356r 1  A9 rr        	lda     #<(_lines_to_clear)
001358r 1  A0 00        	ldy     #$00
00135Ar 1  91 rr        	sta     (sp),y
00135Cr 1  C8           	iny
00135Dr 1  A9 rr        	lda     #>(_lines_to_clear)
00135Fr 1  91 rr        	sta     (sp),y
001361r 1  20 rr rr     	jsr     _animate_lines_to_clear
001364r 1  A9 00        	lda     #$00
001366r 1  8D 06 20     	sta     $2006
001369r 1  8D 06 20     	sta     $2006
00136Cr 1  20 rr rr     	jsr     _wait_vblank
00136Fr 1  AD rr rr     	lda     _block_x
001372r 1  18           	clc
001373r 1  69 01        	adc     #$01
001375r 1  4C rr rr     	jmp     L0A6B
001378r 1  A9 rr        L03B5:	lda     #<(_playfield+40)
00137Ar 1  A2 rr        	ldx     #>(_playfield+40)
00137Cr 1  20 rr rr     	jsr     pushax
00137Fr 1  20 rr rr     	jsr     _blit_playfield
001382r 1  20 rr rr     	jsr     _DrawScore
001385r 1  20 rr rr     	jsr     _DrawLevel
001388r 1  A9 00        	lda     #$00
00138Ar 1  8D 06 20     	sta     $2006
00138Dr 1  8D 06 20     	sta     $2006
001390r 1  20 rr rr     	jsr     _wait_vblank
001393r 1  AD rr rr     L03B2:	lda     _palette_changed
001396r 1  D0 03 4C rr  	jeq     L03DC
00139Ar 1  rr           
00139Br 1  20 rr rr     	jsr     decsp6
00139Er 1  A9 03        	lda     #$03
0013A0r 1  A0 04        	ldy     #$04
0013A2r 1  91 rr        	sta     (sp),y
0013A4r 1  C8           	iny
0013A5r 1  A9 00        	lda     #$00
0013A7r 1  91 rr        	sta     (sp),y
0013A9r 1  A9 11        	lda     #$11
0013ABr 1  A0 02        	ldy     #$02
0013ADr 1  91 rr        	sta     (sp),y
0013AFr 1  C8           	iny
0013B0r 1  A9 3F        	lda     #$3F
0013B2r 1  91 rr        	sta     (sp),y
0013B4r 1  A2 00        	ldx     #$00
0013B6r 1  AD rr rr     	lda     _tetra_i
0013B9r 1  20 rr rr     	jsr     mulax3
0013BCr 1  18           	clc
0013BDr 1  69 rr        	adc     #<(_tetramino_colors)
0013BFr 1  A8           	tay
0013C0r 1  8A           	txa
0013C1r 1  69 rr        	adc     #>(_tetramino_colors)
0013C3r 1  AA           	tax
0013C4r 1  98           	tya
0013C5r 1  A0 00        	ldy     #$00
0013C7r 1  91 rr        	sta     (sp),y
0013C9r 1  C8           	iny
0013CAr 1  8A           	txa
0013CBr 1  91 rr        	sta     (sp),y
0013CDr 1  20 rr rr     	jsr     _ppu_write
0013D0r 1  20 rr rr     	jsr     decsp6
0013D3r 1  A9 03        	lda     #$03
0013D5r 1  A0 04        	ldy     #$04
0013D7r 1  91 rr        	sta     (sp),y
0013D9r 1  C8           	iny
0013DAr 1  A9 00        	lda     #$00
0013DCr 1  91 rr        	sta     (sp),y
0013DEr 1  A9 15        	lda     #$15
0013E0r 1  A0 02        	ldy     #$02
0013E2r 1  91 rr        	sta     (sp),y
0013E4r 1  C8           	iny
0013E5r 1  A9 3F        	lda     #$3F
0013E7r 1  91 rr        	sta     (sp),y
0013E9r 1  A2 00        	ldx     #$00
0013EBr 1  AD rr rr     	lda     _next_tetraminos
0013EEr 1  20 rr rr     	jsr     mulax3
0013F1r 1  18           	clc
0013F2r 1  69 rr        	adc     #<(_tetramino_colors)
0013F4r 1  A8           	tay
0013F5r 1  8A           	txa
0013F6r 1  69 rr        	adc     #>(_tetramino_colors)
0013F8r 1  AA           	tax
0013F9r 1  98           	tya
0013FAr 1  A0 00        	ldy     #$00
0013FCr 1  91 rr        	sta     (sp),y
0013FEr 1  C8           	iny
0013FFr 1  8A           	txa
001400r 1  91 rr        	sta     (sp),y
001402r 1  20 rr rr     	jsr     _ppu_write
001405r 1  20 rr rr     	jsr     decsp6
001408r 1  A9 03        	lda     #$03
00140Ar 1  A0 04        	ldy     #$04
00140Cr 1  91 rr        	sta     (sp),y
00140Er 1  C8           	iny
00140Fr 1  A9 00        	lda     #$00
001411r 1  91 rr        	sta     (sp),y
001413r 1  A9 19        	lda     #$19
001415r 1  A0 02        	ldy     #$02
001417r 1  91 rr        	sta     (sp),y
001419r 1  C8           	iny
00141Ar 1  A9 3F        	lda     #$3F
00141Cr 1  91 rr        	sta     (sp),y
00141Er 1  A2 00        	ldx     #$00
001420r 1  AD rr rr     	lda     _next_tetraminos+1
001423r 1  20 rr rr     	jsr     mulax3
001426r 1  18           	clc
001427r 1  69 rr        	adc     #<(_tetramino_colors)
001429r 1  A8           	tay
00142Ar 1  8A           	txa
00142Br 1  69 rr        	adc     #>(_tetramino_colors)
00142Dr 1  AA           	tax
00142Er 1  98           	tya
00142Fr 1  A0 00        	ldy     #$00
001431r 1  91 rr        	sta     (sp),y
001433r 1  C8           	iny
001434r 1  8A           	txa
001435r 1  91 rr        	sta     (sp),y
001437r 1  20 rr rr     	jsr     _ppu_write
00143Ar 1  20 rr rr     	jsr     decsp6
00143Dr 1  A9 03        	lda     #$03
00143Fr 1  A0 04        	ldy     #$04
001441r 1  91 rr        	sta     (sp),y
001443r 1  C8           	iny
001444r 1  A9 00        	lda     #$00
001446r 1  91 rr        	sta     (sp),y
001448r 1  A9 1D        	lda     #$1D
00144Ar 1  A0 02        	ldy     #$02
00144Cr 1  91 rr        	sta     (sp),y
00144Er 1  C8           	iny
00144Fr 1  A9 3F        	lda     #$3F
001451r 1  91 rr        	sta     (sp),y
001453r 1  A2 00        	ldx     #$00
001455r 1  AD rr rr     	lda     _tetra_hold
001458r 1  20 rr rr     	jsr     mulax3
00145Br 1  18           	clc
00145Cr 1  69 rr        	adc     #<(_tetramino_colors)
00145Er 1  A8           	tay
00145Fr 1  8A           	txa
001460r 1  69 rr        	adc     #>(_tetramino_colors)
001462r 1  AA           	tax
001463r 1  98           	tya
001464r 1  A0 00        	ldy     #$00
001466r 1  91 rr        	sta     (sp),y
001468r 1  C8           	iny
001469r 1  8A           	txa
00146Ar 1  91 rr        	sta     (sp),y
00146Cr 1  20 rr rr     	jsr     _ppu_write
00146Fr 1  A9 00        	lda     #$00
001471r 1  8D rr rr     	sta     _palette_changed
001474r 1  8D 06 20     L03DC:	sta     $2006
001477r 1  8D 06 20     	sta     $2006
00147Ar 1  4C rr rr     	jmp     L0340
00147Dr 1               
00147Dr 1               .endproc
00147Dr 1               
00147Dr 1               ; ---------------------------------------------------------------
00147Dr 1               ; void __near__ IntToStr (unsigned short, __near__ unsigned char*, unsigned char)
00147Dr 1               ; ---------------------------------------------------------------
00147Dr 1               
00147Dr 1               .segment	"CODE"
00147Dr 1               
00147Dr 1               .proc	_IntToStr: near
00147Dr 1               
00147Dr 1               .segment	"BSS"
000153r 1               
000153r 1               L0888:
000153r 1  00           	.res	1,$00
000154r 1               L0889:
000154r 1  00           	.res	1,$00
000155r 1               L088A:
000155r 1  00 00        	.res	2,$00
000157r 1               
000157r 1               .segment	"CODE"
00147Dr 1               
00147Dr 1  A0 00        	ldy     #$00
00147Fr 1  B1 rr        	lda     (sp),y
001481r 1  8D rr rr     L0A70:	sta     L0888
001484r 1  AD rr rr     	lda     L0888
001487r 1  D0 03        	bne     L0A73
001489r 1  4C rr rr     	jmp     incsp5
00148Cr 1  A2 00        L0A73:	ldx     #$00
00148Er 1  A9 01        	lda     #$01
001490r 1  8D rr rr     	sta     L088A
001493r 1  8E rr rr     	stx     L088A+1
001496r 1  AD rr rr     	lda     L0888
001499r 1  38           L0A72:	sec
00149Ar 1  E9 01        	sbc     #$01
00149Cr 1  8D rr rr     	sta     _i
00149Fr 1  AD rr rr     	lda     _i
0014A2r 1  F0 15        	beq     L0A6D
0014A4r 1  AD rr rr     	lda     L088A
0014A7r 1  AE rr rr     	ldx     L088A+1
0014AAr 1  20 rr rr     	jsr     mulax10
0014ADr 1  8D rr rr     	sta     L088A
0014B0r 1  8E rr rr     	stx     L088A+1
0014B3r 1  AD rr rr     	lda     _i
0014B6r 1  4C rr rr     	jmp     L0A72
0014B9r 1  8D rr rr     L0A6D:	sta     L0889
0014BCr 1  4C rr rr     	jmp     L08A4
0014BFr 1  AD rr rr     L0A6E:	lda     L0889
0014C2r 1  18           	clc
0014C3r 1  69 01        	adc     #$01
0014C5r 1  8D rr rr     	sta     L0889
0014C8r 1  AD rr rr     	lda     L088A
0014CBr 1  AE rr rr     	ldx     L088A+1
0014CEr 1  A0 03        	ldy     #$03
0014D0r 1  20 rr rr     	jsr     subeqysp
0014D3r 1  A0 04        L08A4:	ldy     #$04
0014D5r 1  B1 rr        	lda     (sp),y
0014D7r 1  AA           	tax
0014D8r 1  88           	dey
0014D9r 1  B1 rr        	lda     (sp),y
0014DBr 1  CD rr rr     	cmp     L088A
0014DEr 1  8A           	txa
0014DFr 1  ED rr rr     	sbc     L088A+1
0014E2r 1  B0 DB        	bcs     L0A6E
0014E4r 1  A0 00        	ldy     #$00
0014E6r 1  B1 rr        	lda     (sp),y
0014E8r 1  38           	sec
0014E9r 1  ED rr rr     	sbc     L0888
0014ECr 1  18           	clc
0014EDr 1  C8           	iny
0014EEr 1  71 rr        	adc     (sp),y
0014F0r 1  85 rr        	sta     ptr1
0014F2r 1  A9 00        	lda     #$00
0014F4r 1  C8           	iny
0014F5r 1  71 rr        	adc     (sp),y
0014F7r 1  85 rr        	sta     ptr1+1
0014F9r 1  AD rr rr     	lda     L0889
0014FCr 1  18           	clc
0014FDr 1  69 30        	adc     #$30
0014FFr 1  A0 00        	ldy     #$00
001501r 1  91 rr        	sta     (ptr1),y
001503r 1  AD rr rr     	lda     L0888
001506r 1  38           	sec
001507r 1  E9 01        	sbc     #$01
001509r 1  4C rr rr     	jmp     L0A70
00150Cr 1               
00150Cr 1               .endproc
00150Cr 1               
00150Cr 1               
